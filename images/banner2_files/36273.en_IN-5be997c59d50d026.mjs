(self.modernJsonp=self.modernJsonp||[]).push([["36273"],{277229(e,t,n){n.d(t,{A:()=>A});var a=n(859471),r=n(49241);let o=["1200x","736x","474x474","236x236"];var i=n(61163),s=n(979638),l=n(19821),c=n(538329),d=n(911127),u=n(562615);function p({buttonPadding:e,isDeleted:t,onUndoClick:n}){(0,a.useEffect)(()=>{(0,i.A)("LensHistoryItemDeleteOverlay","/app/common/react/components/Lens/History/LensHistoryItemDeleteOverlay.tsx")},[]);let r=(0,c.A)();return(0,u.jsx)(d.A,{children:(0,u.jsxs)(l.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"var(--sema-color-background-wash-scrims-default)",backdropFilter:"blur(10px)",cursor:"default",opacity:+!!t,pointerEvents:t?"auto":"none",transition:"opacity 200ms linear"}},left:!0,padding:e??3,position:"absolute",right:!0,rounding:400,top:!0,children:[(0,u.jsx)(l.KJ,{color:"light",children:r.bt("Successfully deleted", "Successfully deleted", "lens.history.deleted.message", undefined, true)}),(0,u.jsx)(l.Rp,{onTap:n,children:(0,u.jsx)(l.Wu,{color:"light",children:r.bt("Undo", "Undo", "lens.history.undo", undefined, true)})})]})})}var h=n(324440);function m({buttonPadding:e,saveButtonOnly:t,hideSave:n,imageUrl:r,onDeleteClick:o}){(0,a.useEffect)(()=>{(0,i.A)("LensHistoryItemHoverOverlay","/app/common/react/components/Lens/History/LensHistoryItemHoverOverlay.tsx")},[]);let s=(0,c.A)();return(0,u.jsxs)(l.az,{alignItems:"end",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"var(--sema-color-background-wash-image-tint)"}},direction:"column",display:"flex",left:!0,padding:e??3,position:"absolute",right:!0,rounding:400,top:!0,children:[!n&&(0,u.jsx)(h.A,{imageUrl:r,saveButtonOnly:t}),(0,u.jsx)(l.az,{marginTop:"auto",children:(0,u.jsx)(l.K0,{accessibilityLabel:s.bt("Delete", "Delete", "lens.history.image.delete", undefined, true),bgColor:"secondary",icon:"trash-can",onClick:o,size:"md"})})]})}var g=n(299374),_=n(586733),y=n(385800);function x({buttonPadding:e,height:t,hideSave:n,id:r,imageHeight:o,imageWidth:d,isDeleted:h,onDeleted:x,onUndoDelete:f,src:b,viewParameter:v,viewType:A,width:w}){(0,a.useEffect)(()=>{(0,i.A)("LensHistoryItem","/app/common/react/components/Lens/History/LensHistoryItem.tsx")},[]);let S=(0,c.A)(),j=(0,s.Zp)(),{logContextEvent:P}=(0,_.o)(),{setPreparedImage:k,setIsPopoverOpen:I}=(0,g.S)(),{hovered:z,onMouseEnter:E,onMouseLeave:T}=(0,y.A)(),C=(0,a.useCallback)(async()=>{P({aux_data:{url:b},event_type:101,view_parameter:v,view_type:A});try{let e=await fetch(b),t=await e.blob(),n=new File([t],`lens-history-${r}`,{type:t.type});k({file:n,src:b,apiUrl:b,width:d,height:o}),P({aux_data:{url:b},event_type:6707,view_parameter:v,view_type:A}),I(!1),j("/lens-search/")}catch{}},[P,b,v,A,r,k,d,o,I,j]),B=(0,a.useCallback)(({event:e})=>{e.stopPropagation(),x(r)},[r,x]),L=(0,a.useCallback)(({event:e})=>{e.stopPropagation(),f(r)},[r,f]),R=(w??d)/(t??o);return(0,u.jsx)(l.Rp,{onTap:C,children:(0,u.jsxs)(l.az,{dangerouslySetInlineStyle:{__style:{aspectRatio:R}},onMouseEnter:E,onMouseLeave:T,overflow:"hidden",position:"relative",rounding:400,children:[(0,u.jsx)(l.n1,{height:"100%",rounding:400,width:"100%",children:(0,u.jsx)(l._V,{alt:S.bt("Lens history image", "Lens history image", "lens.history.image.alt", undefined, true),fit:"cover",naturalHeight:o,naturalWidth:d,src:b})}),z&&!h&&(0,u.jsx)(m,{buttonPadding:e,hideSave:n,imageUrl:b,onDeleteClick:B}),(0,u.jsx)(p,{buttonPadding:e,isDeleted:h,onUndoClick:L})]})})}var f=n(257300),b=n(168079),v=n(430705);function A({buttonPadding:e,height:t,hideSave:n,pageSize:i,viewParameter:s,viewType:l,width:c}){let{data:d,isFetching:p,fetchMore:h,isAtEnd:m,isLoaded:g}=(0,v.A)({name:"ApiResource",options:{url:r.YU,data:{fields:"id, image_urls, image_sizes",...void 0!==i&&{page_size:i}}},noCache:!0}),y=(0,a.useMemo)(()=>d??[],[d]),{deletedIds:A,onDeleted:w,onUndoDelete:S}=function(){let{logContextEvent:e}=(0,_.o)(),[t,n]=(0,a.useState)(new Set),o=(0,a.useRef)(new Set),i=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{o.current=t},[t]),(0,b.A)(()=>{let t=()=>{if(i.current||0===o.current.size)return;i.current=!0;let t=Array.from(o.current);(async()=>{try{await (0,f.A)({url:r.YU,method:"DELETE",data:{lens_history_ids:t}}),t.forEach(()=>{e({event_type:15657,view_parameter:r.Gj,view_type:r.rm})})}catch(e){}})()},n=()=>t();return window.addEventListener("beforeunload",n),()=>{t(),window.removeEventListener("beforeunload",n)}}),{deletedIds:t,onDeleted:(0,a.useCallback)(e=>{n(t=>new Set(t).add(e)),i.current=!1},[]),onUndoDelete:(0,a.useCallback)(e=>{n(t=>{let n=new Set(t);return n.delete(e),n}),i.current=!1},[])}}(),j=(0,a.useCallback)(a=>{let{id:r}=a,i=function(e){let{image_urls:t,image_sizes:n}=e;if(!t||!n)return null;let a=o.find(e=>t[e]&&n[e]);if(!a)return null;let r=t[a],i=n[a];if(!r||!i||"string"!=typeof r)return null;let{height:s,width:l}=i;return"number"!=typeof s||"number"!=typeof l||0===l||0===s?null:{src:r,height:s,width:l}}(a);if(!i||!r)return null;let{height:d,width:p,src:h}=i,m=A.has(r);return(0,u.jsx)(x,{buttonPadding:e,height:t,hideSave:n,id:r,imageHeight:d,imageWidth:p,isDeleted:m,onDeleted:w,onUndoDelete:S,src:h,viewParameter:s,viewType:l,width:c})},[e,A,t,n,w,S,s,l,c]);return{items:y,isFetching:p,fetchMore:h,isAtEnd:m,isLoaded:g,deletedIds:A,renderItem:j}}},324440(e,t,n){n.d(t,{A:()=>S});var a=n(61163),r=n(859471),o=n(19821),i=n(49241),s=n(911127),l=n(385336),c=n(400235),d=n(562615);function u({anchorRef:e,board:t,onBoardSelect:n,onDismiss:u,popoverId:p,urlPinInfo:h}){(0,r.useEffect)(()=>{(0,a.A)("BoardPicker","/app/common/react/components/Lens/Save/BoardPicker.tsx")},[]);let[m,g]=(0,r.useState)(!1),[_,y]=(0,r.useState)(""),x=(0,r.useCallback)(e=>{let{id:t,name:a,url:r}=e;n({id:t,name:a,url:r}),u()},[n,u]),f=(0,r.useCallback)(e=>{if(!e.boardId)return;let{boardId:t,title:a,url:r}=e;n({id:t,name:a??void 0,url:r??void 0}),u()},[n,u]),b=(0,r.useCallback)(e=>{y(e?.title??""),g(!0)},[]),v=(0,r.useCallback)(()=>{g(!1),u()},[u]);return(0,d.jsx)(o.Wd,{zIndex:new o.K5([i.B4]),children:m?(0,d.jsx)(l.A,{boardCreateSource:"board_picker",images:[{url:h.imageUrl,name:""}],initialValues:{boardName:_},onBoardCreate:x,onClose:v}):(0,d.jsx)(o.AM,{anchor:e.current,id:p,idealDirection:"down",onDismiss:u,positionRelativeToAnchor:!1,size:"xl",children:(0,d.jsx)(s.A,{children:(0,d.jsx)(c.cC,{displayShortlistMostRecentBoard:!0,onBoardCreate:b,onItemChosen:f,selectedItem:t,showCreateBoardButton:!0,showFlyoutSaveButton:!1,showSaveToProfile:!0})})})})}var p=n(299374),h=n(257300),m=n(567176),g=n(538329),_=n(706466),y=n(409652),x=n(106386),f=n(168079),b=n(792047);function v({board:e,onSaveComplete:t,urlPinInfo:n}){return(0,r.useEffect)(()=>{(0,a.A)("SaveHandler","/app/common/react/components/Lens/Save/SaveHandler.tsx")},[]),(0,d.jsx)(b.a,{action:"create",description:"",method:"lens",pinKey:null,setCompletionPromise:t,shuffleAssetKey:null,urlPinInfo:n,children:({handleSaveToBoard:t})=>(0,d.jsx)(A,{board:e,handleSaveToBoard:t})})}function A({board:e,handleSaveToBoard:t}){return(0,f.A)(()=>{t({...e,type:"board"})}),null}var w=n(31973);function S({imageUrl:e,saveButtonOnly:t=!1}){(0,r.useEffect)(()=>{(0,a.A)("LensBetterSave","/app/common/react/components/Lens/Save/LensBetterSave.tsx")},[]);let n=(0,r.useId)(),i=(0,r.useRef)(null),s=(0,r.useRef)(null),l=t?i:s,[c,f]=(0,r.useState)(!1),{isSaved:b,board:A,urlPinInfo:S,saveImageToBoard:j,handleUnsave:P,renderPendingSave:k}=function({imageUrl:e}){let t={description:"",imageUrl:e,link:""},n=function(){let e=(0,x.d4)(e=>e.mostRecentBoard);if(e)return{id:e.id,name:e.name,url:e.url}}(),{isSaved:a,savedBoard:o,handleBoardSaveComplete:i,handleUnsave:s,setOptimisticSave:l}=function({imageUrl:e}){let t=(0,g.A)(),n=(0,_.CG)(),{getSavedImageState:a,setSavedImageState:o,clearSavedImageState:i}=(0,p.S)(),s=a(e),[l,c]=(0,r.useState)(!!s),[u,x]=(0,r.useState)(s?.pinId??null),[f,b]=(0,r.useState)(s?.board),v=(0,r.useCallback)(async(a,r)=>{await (0,h.A)({url:"/v3/pins/{pin}/",urlParams:{pin:a},method:"DELETE"}),c(!1),x(null),b(void 0),i(e);let o=r?t.bt("Removed from your board.", "Removed from your board!", "LensBetterSave.RemovedFromBoard", undefined, true):t.bt("Pin removed.", "Pin removed!", "LensBetterSave.PinRemoved", undefined, true);n.showToast(({hideToast:e})=>(0,d.jsx)(m.A,{dataTestId:"lens-better-save-removed-toast",onHide:e,text:o}))},[i,t,e,n]),A=(0,r.useCallback)(async()=>{u&&await v(u,!!f?.id)},[u,f?.id,v]),w=(0,r.useCallback)(e=>{c(!0),b(e)},[]);return{isSaved:l,savedBoard:f,handleBoardSaveComplete:(0,r.useCallback)(async t=>{let{id:a,board:r}=await t.promise,{id:i,name:s,url:l}=r,u={id:i,name:s,url:l};c(!0),x(a),b(u),o(e,{pinId:a,board:u}),n.showToast(({hideToast:t})=>(0,d.jsx)(y.A,{boardName:s,boardUrl:l,onHide:t,onUndo:async()=>{t(),await v(a,!!i)},pinImageUrl:e}))},[e,o,n,v]),handleUnsave:A,setOptimisticSave:w}}({imageUrl:e}),{setPendingBoard:c,renderPendingSave:u}=function({urlPinInfo:e,onBoardSaveComplete:t}){let[n,a]=(0,r.useState)(null),o=(0,r.useCallback)(()=>n?(0,d.jsx)(v,{board:n,onSaveComplete:async e=>{await t(e),a(null)},urlPinInfo:e}):null,[n,t,e]);return{setPendingBoard:a,renderPendingSave:o}}({urlPinInfo:t,onBoardSaveComplete:i});return{isSaved:a,board:o??n,urlPinInfo:t,saveImageToBoard:(0,r.useCallback)(e=>{l(e),c(e)},[l,c]),handleUnsave:s,renderPendingSave:u}}({imageUrl:e}),I=(0,r.useCallback)(e=>{(e.stopPropagation(),t&&b)?P():f(e=>!e)},[t,b,P]),z=(0,r.useCallback)(async e=>{(e.stopPropagation(),b)?P():!A?.id||t?f(!0):j(A)},[A,t,b,P,j]);return(0,d.jsxs)(o.az,{ref:i,"data-test-id":"lens-better-save",width:"100%",children:[(0,d.jsx)(w.A,{accessibilityControls:n,accessibilityExpanded:c,accessibilityHaspopup:!0,dropdownRef:s,hideDropdown:t,isSaved:b,onBoardDropdownClick:I,onSaveClick:z,promotedIsLeadAd:!1,selectedTitle:A?.name,showBoardFlyout:c,unselectedText:"Select",variant:"pin"}),c&&(0,d.jsx)(u,{anchorRef:l,board:A,onBoardSelect:j,onDismiss:()=>f(!1),popoverId:n,urlPinInfo:S}),k()]})}},49241(e,t,n){n.d(t,{B4:()=>h,CR:()=>d,Dj:()=>x,Et:()=>y,Gj:()=>l,J8:()=>p,SK:()=>i,SY:()=>c,UQ:()=>f,WK:()=>_,YU:()=>o,b0:()=>v,cr:()=>b,g0:()=>g,hU:()=>A,nb:()=>m,qm:()=>u,rm:()=>s});var a=n(19821),r=n(584342);let o="/v3/visual_search/lens/history/",i="/upload-lens-image-history/",s=119,l=4054,c=15075,d=119,u=150,p=540,h=new a.K5([r.Bf]),m="CAMERA_GALLERY",g="image/jpeg",_=".jpg",y=.8,x=1200,f="/v3/visual_search/lens/upload/",b="IMAGE_URL",v="/v3/visual_search/lens/search/",A="/upload-lens-image/"},910409(e,t,n){n.d(t,{A:()=>o});let a=[{magicBytes:"Qk",format:{mimeType:"image/bmp",extension:".bmp"}},{magicBytes:"R0lGOD",format:{mimeType:"image/gif",extension:".gif"}},{magicBytes:"/9j/",format:{mimeType:"image/jpeg",extension:".jpg"}},{magicBytes:"iVBORw0KGgo",format:{mimeType:"image/png",extension:".png"}},{magicBytes:"SUkq",format:{mimeType:"image/tiff",extension:".tiff"}},{magicBytes:"TU0A",format:{mimeType:"image/tiff",extension:".tiff"}},{magicBytes:"UklGR",format:{mimeType:"image/webp",extension:".webp"}}],r={mimeType:"image/png",extension:".png"};function o(e){let t,n=a.find(({magicBytes:t})=>e.startsWith(t)),{mimeType:o,extension:i}=n?.format??r;try{t=atob(e)}catch{throw Error("Invalid base64 encoding")}return new File([new Blob([Uint8Array.from(t,e=>e.charCodeAt(0))],{type:o})],`lens-image${i}`,{type:o})}},350539(e,t,n){n.d(t,{i6:()=>l,o_:()=>c});var a=n(35458),r=n(910409),o=n(401691),i=n(484409);let s=a.z.object({src:a.z.string().startsWith("data:"),apiUrl:a.z.string(),width:a.z.number(),height:a.z.number()});function l(e){try{let t={src:e.src,apiUrl:e.apiUrl,width:e.width,height:e.height};(0,i.V2)().setItem(o.Wy,t)}catch{}}function c(){try{let e=(0,i.V2)().getItem(o.Wy),t=s.safeParse(e);if(!t.success)return d(),null;let{src:n,apiUrl:a,width:l,height:c}=t.data,u=n.split(",")[1];if(!u)return d(),null;return{file:(0,r.A)(u),src:n,apiUrl:a,width:l,height:c}}catch{return d(),null}}function d(){try{(0,i.V2)().removeItem(o.Wy)}catch{}}},485647(e,t,n){n.d(t,{A:()=>c});var a=n(61163),r=n(859471),o=n(19821),i=n(154508),s=n(678358),l=n(562615);function c({actionButton:e,collapsed:t,disabled:n,displayViewState:c,forceTappableHeader:d,headerHeight:u,headerPaddingX:p,headerPreview:h,heading:m,icon:g="chevron-down",onClick:_,showArrow:y,surface:x}){(0,r.useEffect)(()=>{(0,a.A)("CollapsableHeader","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CollapsableHeader.tsx")},[]);let{closeupWithinMasonryEnabled:f,peekCloseupEnabled:b,viewportSize:v}=(0,s._G)();if(!d&&null===c){let e,t;return e=(0,i.Kd)({peekCloseupEnabled:b,viewportSize:v,surface:x}),t=(0,l.jsx)(o._Y,{accessibilityLevel:2,align:"start",id:"comments-heading",size:e?"300":"400",children:m}),e?(0,l.jsx)(o.az,{marginBottom:4,children:t}):t}let A=(0,l.jsx)(o.az,{marginBottom:!t&&b?4:void 0,children:(0,l.jsxs)(o.so,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:u,justifyContent:"between",children:[(0,l.jsx)(o.so.Item,{flex:"shrink",children:(0,l.jsx)(o._Y,{accessibilityLevel:2,align:"start",color:n?"disabled":"default",id:"comments-heading",size:"300",children:m})}),(0,l.jsx)(o.so.Item,{flex:"shrink",children:(0,l.jsxs)(o.so,{alignItems:"center",direction:"row",gap:{row:1,column:0},children:[t&&h,(y||f)&&(0,l.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{transform:t?"rotate(0deg)":"rotate(180deg)",transition:"all 600ms cubic-bezier(.25,1,.5,1)"}},opacity:100*!!y,children:(0,l.jsx)(o.In,{accessibilityLabel:"",color:!y||n?"disabled":"default",dataTestId:"collapse-button",icon:g})})]})}),e&&(0,l.jsx)(o.so.Item,{flex:"grow",children:(0,l.jsx)(o.so,{justifyContent:"end",children:e})})]})});return(0,l.jsx)(o.az,{paddingX:p,children:_?(0,l.jsx)(o.Rp,{disabled:!y||n,onTap:_,children:A}):A})}},655352(e,t,n){n.d(t,{A:()=>a});let a='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},642477(e,t,n){n.d(t,{A:()=>r});var a=n(844255);let r=function(){let{country:e,isBot:t,isAuthenticated:n,locale:r}=(0,a._8)(),o="en"===r.slice(0,2);return t||!n&&o&&"US"===e}},24086(e,t,n){n.d(t,{A:()=>r});var a=n(859471);let r=function(e,t){let n=(0,a.useRef)(e),r=(0,a.useRef)(void 0),o=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{n.current=e},[e]),(0,a.useEffect)(()=>()=>{r.current&&clearTimeout(r.current)},[t]);let i=(0,a.useCallback)((...e)=>{o.current=e,r.current&&clearTimeout(r.current),r.current=window.setTimeout(()=>{n.current(...e),o.current=void 0},t)},[t]);return i.flush=(0,a.useCallback)(()=>{if(r.current&&(clearTimeout(r.current),r.current=void 0),o.current){let e=o.current;return o.current=void 0,n.current(...e)}},[]),i.cancel=(0,a.useCallback)(()=>{r.current&&(clearTimeout(r.current),r.current=void 0),o.current=void 0},[]),i}},353614(e,t,n){n.d(t,{A:()=>a});function a(e,t){return e.reduce((e,n)=>{let a="function"==typeof t?t(n):n[t];return a in e||(e[a]=[]),e[a].push(n),e},{})}},640992(e,t,n){n.d(t,{A:()=>r});var a=n(859471);function r(e){let{animationData:t,autoplay:r,initialSegment:o,loop:i,onComplete:s,onConfigReady:l,onDataFailed:c,onDataReady:d,onDestroy:u,onDOMLoaded:p,onEnterFrame:h,onLoadedImages:m,onLoopComplete:g,onSegmentStart:_}=e,[y,x]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),v=(0,a.useRef)(null),A=(0,a.useRef)(null),w=async()=>{x(await n.e("70993").then(n.t.bind(n,159976,23)))};return(0,a.useEffect)(()=>{w()},[]),(0,a.useEffect)(()=>{if(!A.current||!y||!t||!t.w||!t.h)return;v.current?.destroy();let n={...e,container:A.current};v.current=y.loadAnimation(n),b(!!v.current)},[A,v,t,y,e]),(0,a.useEffect)(()=>{v.current&&(v.current.loop=!!i,i&&v.current.isPaused&&v.current.play())},[i]),(0,a.useEffect)(()=>{v.current&&(v.current.autoplay=!!r)},[r]),(0,a.useEffect)(()=>{!v.current||(o?Array.isArray(o)&&o.length&&((v.current.currentRawFrame<o[0]||v.current.currentRawFrame>o[1])&&(v.current.currentRawFrame=o[0]),v.current.setSegment(o[0],o[1])):v.current.resetSegments(!1))},[o]),(0,a.useEffect)(()=>{if(!v.current||!f)return()=>{};let e=[{name:"complete",handler:s},{name:"loopComplete",handler:g},{name:"enterFrame",handler:h},{name:"segmentStart",handler:_},{name:"config_ready",handler:l},{name:"data_ready",handler:d},{name:"data_failed",handler:c},{name:"loaded_images",handler:m},{name:"DOMLoaded",handler:p},{name:"destroy",handler:u}].filter(e=>null!=e.handler).map(e=>(v.current?.addEventListener(e.name,e.handler),()=>{v.current?.removeEventListener(e.name,e.handler)}));return()=>{e.forEach(e=>e())}},[f,s,g,h,_,l,d,c,m,p,u]),{animationContainerRef:A,play:()=>{v.current?.play()},stop:()=>{v.current?.stop()},pause:()=>{v.current?.pause()},setSpeed:e=>{v.current?.setSpeed(e)},goToAndStop:(e,t)=>{v.current?.goToAndStop(e,t)},goToAndPlay:(e,t)=>{v.current?.goToAndPlay(e,t)},setDirection:e=>{v.current?.setDirection(e)},playSegments:(e,t)=>{v.current?.playSegments(e,t)},setSubframe:e=>{v.current?.setSubframe(e)},getDuration:e=>v.current?.getDuration(e),destroy:()=>{v.current?.destroy()},animationLoaded:f,animationItem:v.current}}},16917(e,t,n){n.d(t,{A:()=>k});var a=n(17775),r=n(564954),o=n(385982),i=n(472723),s=n(746904),l=n(355426),c=n(54240),d=n(752643),u=n(441496),p=n(449344),h=n(2354);let m="stopwatch_v2",g=(0,a.lo)(m),_=new Map,y=[],x=[],f=!1;function b(){let e=performance.now();_.forEach((t,n)=>{e-t.startTimestamp>t.maxDuration&&(g(`Auto-aborting stale stopwatch ${n} after ${t.maxDuration}ms`),P(n,"exceeded_max_duration"))})}function v(e,t,n){performance.mark(`${m}:${e}:${t}`,n?{startTime:n}:void 0)}function A(e,t,n,a){performance.measure(`${m}:${e}:${t}`,n,a)}function w(e){let t=`${m}:${e}:`,n=[`${t}start`,`${t}end`,`${t}subspan:`];return y.filter(e=>e.name.startsWith(t)&&!n.some(t=>e.name.startsWith(t))).map(e=>({label:e.name.slice(t.length),timestamp:e.startTime}))}function S(e,t){let n=`${m}:${e}:subspan:`;return x.filter(e=>e.name.startsWith(n)).map(e=>({name:e.name.slice(n.length),id:(0,c.A)(),parentId:t,startTime:e.startTime,endTime:e.startTime+e.duration,annotationMap:{},binaryAnnotationMap:{}}))}function j(e){let t=`${m}:${e}:`;try{y=y.filter(e=>!e.name.startsWith(t)),x=x.filter(e=>!e.name.startsWith(t))}catch{}let n=_.get(e);n?.resourceObserver?.disconnect(),_.delete(e)}function P(e,t){if(!(0,d.A)())return;let n=_.get(e);if(!n)return void(0,u.J6)({errorName:"stopwatch_not_found",pwtName:e,errorDetailsTag:"abort",version:"2"});g(`Aborted ${e}: ${t}`);let a=performance.now(),{startTimestamp:o}=n,s=(0,c.A)(),m=(0,h.tQ)(),y={type:"stopwatch",name:e},x={type:"ABORT",traceId:s,startTime:o,endTime:a,spans:S(e,s),annotationMap:(0,l.A)(w(e)),binaryAnnotationMap:(0,r.jp)({metricId:y,pwtStaticContext:m,binaryAnnotations:n.binaryAnnotations,performanceResourceTimings:n.resourceBuffer,type:"ABORT",stopwatchVersion:2}),reason:t??"unknown"};(0,i.A)({metricId:y,pwtStaticContext:m,result:x,sampleRate:n.sampleRate,stopwatchVersion:2}),(0,u.HF)({abortReason:t??"unknown",pwtName:e,annotateExperiments:(0,p.e0)(),version:"2"}),j(e)}function k(e,t={}){let{sampleRate:n,maxDuration:a}=t;return{name:e,start:t=>(function(e,t={}){if(!(0,d.A)())return;!function(){if(f||!(0,d.A)())return;f=!0;let e=`${m}:`;try{new PerformanceObserver(t=>{let n=t.getEntries().filter(t=>t.name.startsWith(e));y.push(...n)}).observe({type:"mark",buffered:!0}),new PerformanceObserver(t=>{let n=t.getEntries().filter(t=>t.name.startsWith(e));x.push(...n)}).observe({type:"measure",buffered:!0}),setInterval(b,1e4)}catch{}}(),_.has(e)&&(g(`Stopwatch ${e} already active, aborting previous`),P(e,"new_stopwatch_started"));let n=t.startTime??performance.now(),{observer:a,buffer:r}=function(){let e=[];if(!(0,d.A)())return{observer:null,buffer:e};try{let t=new PerformanceObserver(t=>{if(e.push(...t.getEntries()),e.length>5e3){let t=e.length-5e3;e.splice(0,t),(0,u.pI)({eventName:"resourceBufferTruncated.v2",tags:{dropped:t,remaining:5e3}}),g("Resource buffer truncated",{dropped:t,remaining:5e3})}});return t.observe({type:"resource",buffered:!1}),{observer:t,buffer:e}}catch{return{observer:null,buffer:e}}}();_.set(e,{sampleRate:t.sampleRate??1,binaryAnnotations:{},resourceObserver:a,resourceBuffer:r,startTimestamp:n,maxDuration:t.maxDuration??6e4}),v(e,"start",n),(0,u.Lc)({pwtName:e,annotateExperiments:(0,p.e0)(),version:"2"}),g(`Started ${e}`)})(e,{...t,sampleRate:n,maxDuration:a}),stop:t=>(function(e,t){var n;let a;if(!(0,d.A)())return;let y=_.get(e);if(!y)return void(0,u.J6)({errorName:"stopwatch_not_found",pwtName:e,errorDetailsTag:"stop",version:"2"});let x=t??performance.now();v(e,"end",x);let{startTimestamp:f}=y;A(e,"duration",`${m}:${e}:start`,`${m}:${e}:end`);let b=(0,c.A)(),P=(0,h.tQ)(),k={type:"stopwatch",name:e},I={type:"COMPLETE",metricId:k,traceId:b,startTime:f,endTime:x,spans:[...S(e,b),...(n=y.resourceBuffer,[{name:"network_resources",id:a=(0,c.A)(),parentId:b,startTime:f,endTime:x,annotationMap:{},binaryAnnotationMap:{}},...n.filter(e=>e.responseEnd>0&&e.startTime>=f&&e.responseEnd<=x).map(e=>(0,s.A)((0,o.B)(e,[]),a)).filter(Boolean)])],annotationMap:(0,l.A)(w(e)),binaryAnnotationMap:(0,r.jp)({metricId:k,pwtStaticContext:P,binaryAnnotations:y.binaryAnnotations,performanceResourceTimings:y.resourceBuffer,type:"COMPLETE",stopwatchVersion:2})};g(`Stopped ${e}`,{duration:x-f}),(0,i.A)({metricId:k,pwtStaticContext:P,result:I,sampleRate:y.sampleRate,stopwatchVersion:2}),(0,u.ed)({pwtName:e,annotateExperiments:(0,p.e0)(),version:"2"}),j(e)})(e,t),abort:t=>P(e,t),annotate:t=>{(0,d.A)()&&_.has(e)&&(v(e,t),g(`${e} annotation: ${t}`))},binaryAnnotate:(t,n,a)=>{let r;(r=_.get(e))&&(r.binaryAnnotations={...r.binaryAnnotations,[t]:{value:n,type:a}},g(`${e} binary: ${t}=${String(n)}`))},subspanStart:t=>{(0,d.A)()&&_.has(e)&&(v(e,`subspan:${t}:start`),g(`${e} subspan start: ${t}`))},subspanStop:t=>(function(e,t){if((0,d.A)()&&_.has(e)){v(e,`subspan:${t}:end`);try{A(e,`subspan:${t}`,`${m}:${e}:subspan:${t}:start`,`${m}:${e}:subspan:${t}:end`),g(`${e} subspan stop: ${t}`)}catch{g(`${e} subspan stop failed: ${t}`)}}})(e,t),isActive:()=>_.has(e)}}},782310(e,t,n){n.d(t,{A:()=>A});var a=n(859471),r=n(987628),o=n(1807),i=n(17775),s=n(88894),l=n(564954),c=n(385982),d=n(472723),u=n(746904),p=n(851116),h=n(355426),m=n(772807),g=n(54240),_=n(161235);let y=["closeup_dweb_blended_ui_organic"],x=(0,i.lo)("PwtStopwatch"),f=(e,t)=>{if(_.A){if("start"===t.type&&!e.isTiming){let{name:n,startTime:a,navigationType:r}=t;return(0,o.DM)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof a?a:_.A.now(),metricId:{type:"stopwatch",name:n,navigationType:r},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming)if(t.bypassIsTimingCheck)x("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return x("ignoring action - stopwatch is not actively timing",t),(0,o.DM)(`WARN.${n}.noTiming.${t.type}`),e}if("annotate"===t.type){let n=_.A.now();return x(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return x(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:t.value,type:t.annotationType}}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:a}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n,type:a}}}};{let r=e.binaryAnnotations[t.name].value||0;return x(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(r)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n?t.operation(r,n):r,type:a}}}}}}if("addSubspan"===t.type){x(`adding subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&x(`WARNING: adding duplicate subspan name {${t.name}}`);let n=t.id||(0,g.A)();-1!==e.spans.findIndex(e=>e.id===n)&&x(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let a=0;return t.startTime?a=t.startTime:e.startTime?a=e.startTime:x(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:a,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){x(`starting subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&x(`WARNING: starting duplicate subspan name {${t.name}}`);let n=t.id||(0,g.A)();-1!==e.spans.findIndex(e=>e.id===n)&&x(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);let a=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||a,startTime:_.A.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){x(`stopping subspan {${t.name}}`),!t.id&&e.spans.filter(e=>e.name===t.name).length>1&&(0,o.vV)("duplicate_subspan_stop_name",{name:t.name,type:t.type});let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=_.A.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,o.vV)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.filter(e=>e.name===t.currentName).length>1&&(0,o.vV)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let n=e.spans.findIndex(e=>e.name===t.currentName);return n>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(x(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[n].name=t.newName):(0,o.vV)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:a,pwtStaticContext:r,annotations:o,binaryAnnotations:i,isSampled:p,spans:m,traceId:f}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){let s=t.stopTime||_.A.now(),p=[...m.map(t=>{t.endTime===1/0&&(t.endTime=s);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(x(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===m.length){let e=(0,g.A)();p.push({name:"network_resources",id:e,startTime:n,endTime:s,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,u.A)((0,c.B)(t,[]),e)).filter(Boolean))}let b={type:"COMPLETE",metricId:a,traceId:f,startTime:n,endTime:s,spans:p,annotationMap:{...(0,h.A)(o)},binaryAnnotationMap:(0,l.jp)({annotateExperiments:y,metricId:a,pwtStaticContext:r,binaryAnnotations:i,performanceResourceTimings:t.customStopwatchBuffer||[],type:"COMPLETE",stopwatchVersion:1})};(0,d.A)({metricId:a,pwtStaticContext:r,result:b,annotateExperiments:y})}return(0,s.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.A)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:a}=t;return n&&(0,o.vV)(n),a&&a.disconnect(),(0,s.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.A)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let n=t.reason||"",{startTime:a,metricId:r,pwtStaticContext:o,binaryAnnotations:i,traceId:c}=e,u={type:"ABORT",traceId:c,startTime:a,endTime:_.A.now(),spans:[],annotationMap:{},binaryAnnotationMap:(0,l.jp)({annotateExperiments:y,metricId:r,pwtStaticContext:o,binaryAnnotations:i,performanceResourceTimings:t.customStopwatchBuffer||[],type:"ABORT",stopwatchVersion:1}),reason:n};return(0,d.A)({metricId:r,pwtStaticContext:o,result:u,annotateExperiments:y}),(0,s.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:c,spanNameUpdates:[]}}}return e};var b=n(749566),v=n(562615);let A=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:i,manualAndResourceSpans:l=!1})=>{let{Provider:c,getMaybe:d}=(0,r.A)(`Stopwatch_${e}`);return{Provider:function({children:r}){let d=(({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:r=!1})=>{let o=(0,p.A)(),i=(0,a.useRef)([]),l=(0,a.useRef)(null),c=(0,a.useRef)(null);null===c.current&&(c.current=(0,s.Qr)());let[d,u]=(0,a.useReducer)(f,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:c.current,spanNameUpdates:[]});return o?{isTiming:d.isTiming,name:d.name,start:a=>(window.PerformanceObserver&&(i.current=[],l.current=(0,m.A)({entryTypes:["resource"]},e=>{i.current=i.current.concat(e.getEntries()),i.current.length>1e3&&(i.current=i.current.slice(-1e3))})),u({type:"start",startTime:a,name:e,navigationType:n,pwtStaticContext:o,isSampled:!t||Math.random()<t})),stop:e=>u({type:"stop",stopTime:e,stopwatchPerformanceObserver:l.current,customStopwatchBuffer:i.current,manualAndResourceSpans:r}),error:e=>{u({type:"error",stopwatchPerformanceObserver:l.current,error:e})},abort:e=>u({type:"abort",stopTime:_.A?.now(),stopwatchPerformanceObserver:l.current,customStopwatchBuffer:i.current,reason:e}),annotate:(e,t,n=!1)=>u({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,a,r=!1)=>u({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:a,bypassIsTimingCheck:r}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:r=!1})=>u({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:r}),addSubspan:({name:e,startTime:t,endTime:n,annotations:a={},binaryAnnotations:r={},parentId:o=null,id:i=null,bypassIsTimingCheck:s=!1})=>u({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:r,parentId:o,id:i,bypassIsTimingCheck:s}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:a=null,parentName:r=null,id:o=null,bypassIsTimingCheck:i=!1})=>u({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:a,parentName:r,id:o,bypassIsTimingCheck:i}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:a,parentId:r,bypassIsTimingCheck:o=!1})=>u({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:a,parentId:r,bypassIsTimingCheck:o}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:a=!0})=>u({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:a}),getSpans:(e,t)=>d.spans.filter(n=>n[e]===t),getTraceId:()=>d.traceId}:null})({name:e,sampleRate:t,navigationType:i,manualAndResourceSpans:l}),u=(0,b.A)(),h=u?u.time:0,g=(0,a.useRef)("NotStarted"),y=d?.isTiming,x=(0,a.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",d?.abort(t)):(0,o.DM)(`WARN.${e}.noTiming.abort`)},[d]),A=(0,a.useCallback)((e,t)=>{d?.annotate(e,t)},[d]),w=(0,a.useCallback)((e,t,n,a)=>{d?.binaryAnnotate(e,t,n,a)},[d]),S=(0,a.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:r})=>{d?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:r})},[d]),j=(0,a.useCallback)(({name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:r,parentId:o,id:i,bypassIsTimingCheck:s})=>{d?.addSubspan({name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:r,parentId:o,id:i,bypassIsTimingCheck:s})},[d]),P=(0,a.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:a,parentName:r,id:o,bypassIsTimingCheck:i})=>{d?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:a,parentName:r,id:o,bypassIsTimingCheck:i})},[d]),k=(0,a.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:a,parentId:r,bypassIsTimingCheck:o})=>{d?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:a,parentId:r,bypassIsTimingCheck:o})},[d]),I=(0,a.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:a})=>{d?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:a})},[d]),z=(0,a.useCallback)((e,t)=>d?d.getSpans(e,t):[],[d]),E=(0,a.useCallback)(()=>d?d.getTraceId():"",[d]),T=(0,a.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",d?.error(t)):(0,o.DM)(`WARN.${e}.noTiming.error`)},[d]),C=(0,a.useCallback)(e=>{"Started"===g.current&&d?.abort("duplicated_init_stopwatch_action"),g.current="Started",d?.start(e)},[d]),B=(0,a.useCallback)(e=>{"NotStarted"===g.current&&(g.current="Started",d?.start(e))},[d]),L=(0,a.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",d?.stop(t)):(0,o.DM)(`WARN.${e}.noTiming.stop`)},[d]);(0,a.useEffect)(()=>()=>{n&&x("unloadOrClientNavigation")},[h]);let R=(0,a.useMemo)(()=>({name:e,isTiming:y,abort:x,addAnnotation:A,addBinaryAnnotation:w,binaryAnnotationOperation:S,addSubspan:j,subspanStart:P,subspanStop:k,getSpans:z,getTraceId:E,updateSubspanName:I,stop:L,error:T,start:C,startOnce:B}),[y,x,A,w,S,j,P,k,z,E,I,L,T,C,B]);return(0,v.jsx)(c,{value:R,children:r})},get:d}}},114735(e,t,n){n.d(t,{A:()=>r});let a=(0,n(16917).A)("search_tab_render");function r(){return a}},355426(e,t,n){n.d(t,{A:()=>a});let a=e=>{let t={};e.forEach(({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}});let n=Object.freeze({});return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,a)=>{let r=a?`${e}_${a+1}`:e;n={...n,[r]:t}})}),n}},888454(e,t,n){n.d(t,{fX:()=>o,kP:()=>r,uq:()=>a});let a="var(--sema-color-hover-background-secondary)",r="var(--sema-color-background-secondary)",o="0 0 0 4px rgba(0, 132, 255, .5)"},802209(e,t,n){n.d(t,{$G:()=>o,AP:()=>m,G2:()=>r,Kf:()=>l,Nc:()=>u,Qf:()=>s,Tx:()=>i,V1:()=>c,ZD:()=>g,hm:()=>d,iz:()=>y,xP:()=>h,xx:()=>_,ys:()=>p});var a=n(19821);let r={w:9,h:16},o=r.w/r.h,i=800,s=10,l=5e3,c=2e3;function d(e,t=1){return{x:(e??24)/5,y:(e??24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},p=[u.IMAGE,u.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},m=new a.rk(1),g=new a.K5([m]),_=new a.K5([g]),y=e=>{let t=Math.floor(e||0),n=Math.floor(t/60),a=t-60*n,r=n<10?`${n}`:n,o=a<10?`0${a}`:a;return`${r}:${o}`}},483877(e,t,n){n.d(t,{A:()=>a});let a=({url:e})=>""===e||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(e)},156602(e,t,n){n.d(t,{A:()=>c});var a=n(61163),r=n(859471),o=n(19821),i=n(562615);function s(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l={default:{backgroundColor:"var(--sema-color-background-secondary)",boxShadow:"none"},drag:{backgroundColor:"var(--sema-color-background-default)",boxShadow:"var(--sema-space-0) var(--sema-space-0) var(--sema-space-0) var(--sema-space-25) var(--sema-color-border-education)"},error:{backgroundColor:"var(--sema-color-background-error-weak)",boxShadow:"var(--sema-space-0) var(--sema-space-0) var(--sema-space-0) var(--sema-space-25) var(--sema-color-border-error)"}};class c extends r.Component{constructor(...e){super(...e),s(this,"state",{isDraggingOver:!1,isHoveringOver:!1,containedHeight:null}),s(this,"handleOnDragEnter",e=>{let{onDragEnter:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),t&&t(e)}),s(this,"handleOnDragLeave",e=>{let{onDragLeave:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),s(this,"handleOnDragOver",e=>{let{onDragOver:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e)}),s(this,"handleOnDrop",e=>{let{onDrop:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),s(this,"handleMouseEnter",()=>{let{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})}),s(this,"handleMouseLeave",()=>{let{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}),s(this,"setContainedHeight",e=>{this.setState({containedHeight:e})})}getDragContainerStyles(e,t){return t&&"default"===e?{...l[e],backgroundColor:t}:l[e]}render(){let{children:e,color:t,dropRounding:n,hasError:a,height:r,position:s,width:l}=this.props,{isDraggingOver:c,isHoveringOver:d,containedHeight:u}=this.state;return(0,i.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(c?"drag":a?"error":"default",t),...n?{borderRadius:n}:{}}},"data-test-id":"drag-behavior-container",height:r||u||"100%",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:s,rounding:200,width:l||"100%",children:e(c,d,this.setContainedHeight,u)})}componentDidMount(){(0,a.A)("DragBehavior","/app/packages/vip/DragBehavior.tsx")}}},543219(e,t,n){n.d(t,{A:()=>c});var a=n(61163),r=n(859471),o=n(19821),i=n(156602),s=n(562615);let l={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0},c=e=>{(0,r.useEffect)(()=>{(0,a.A)("FileUpload","/app/packages/vip/FileUpload.tsx")},[]);let[t,n]=(0,r.useState)(!1),c=t=>{let{onChange:n}=e;t.preventDefault(),t.stopPropagation(),n&&n(t),t.target.value=""},d=t=>{let{onClick:n}=e;n&&n(t)},{accept:u,accessibilityLabel:p,accessibilityDescription:h,allowMultipleFiles:m,children:g,color:_,dropRounding:y,hasError:x,height:f,id:b,onDrop:v,position:A,rounding:w=200,width:S,isAriaHidden:j,isRequired:P,experimentsClient:k}=e;return(0,s.jsx)(i.A,{color:_,dropRounding:y,experimentsClient:k,hasError:x,height:f,onDrop:v,position:A,width:S,children:e=>(0,s.jsxs)(o.az,{dangerouslySetInlineStyle:{__style:{...t?{border:"2px solid var(--sema-color-border-focus-outer-default)"}:{}}},height:"100%",onBlur:()=>n(!1),onFocus:()=>n(!0),position:"relative",rounding:w,children:[g(e),(0,s.jsx)("input",{accept:u,"aria-describedby":"upload-button-explanation","aria-hidden":j,"aria-invalid":x?"true":void 0,"aria-label":p,"data-test-id":b,id:b,multiple:m,onChange:c,onClick:d,required:P,style:l,tabIndex:j?-1:0,type:"file"}),h&&(0,s.jsx)(o.az,{display:"none",id:"upload-button-explanation",children:(0,s.jsx)(o.KJ,{children:h})})]})})}},835940(e,t,n){n.d(t,{A:()=>c,E:()=>l});var a=n(61163),r=n(859471),o=n(987628),i=n(562615);let{Provider:s,get:l}=(0,o.A)("ContentHeader");function c({children:e}){(0,r.useEffect)(()=>{(0,a.A)("ContentHeaderContext","/app/www/ContentHeader/ContentHeaderContext.tsx")},[]);let[t,n]=(0,r.useState)(!1),o=(0,r.useMemo)(()=>({isContentHeaderPresent:t,setIsContentHeaderPresent:n}),[t]);return(0,i.jsx)(s,{value:o,children:e})}},900344(e,t,n){n.d(t,{I4:()=>c,jR:()=>l});var a=n(859471),r=n(987628),o=n(63661),i=n(562615);let{Provider:s,get:l}=(0,r.A)("HeaderShadow");function c({children:e}){let[t,n]=(0,a.useState)(!1),[r,l]=(0,a.useState)(0),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=(0,o.A)(()=>{n(window.scrollY>0),l(window.scrollY)},50);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]);let u=(0,a.useCallback)(e=>{d(e)},[]),p=(0,a.useMemo)(()=>({currentScrollPosition:r,isScrolled:t,setSubheaderShadow:u,subheaderShadow:c}),[r,t,u,c]);return(0,i.jsx)(s,{value:p,children:e})}},856865(e,t,n){n.d(t,{A:()=>o});var a=n(586754),r=n(743858);function o(){let{enabled:e}=(0,a.A)(),{enabled:t}=(0,r.A)();return{enabled:e||t}}},743858(e,t,n){n.d(t,{A:()=>c});var a=n(979638),r=n(693154),o=n(115795),i=n(844255),s=n(642477),l=n(971289);let c=function(){let e=(0,r.A)(),{isRTL:t}=(0,i._8)(),n=(0,a.zy)(),c=(0,l.Ay)();return{enabled:(0,s.A)()&&"desktop"===c&&!(0,o.NF)(n)&&!(0,o.BG)(n)&&!(0,o.fF)(n)&&!(0,o.qi)(n)&&!(0,o.TS)(n)&&!t&&!e.isAuth}}},750612(e,t,n){n.d(t,{A:()=>h});var a=n(61163),r=n(859471),o=n(19821),i=n(485647),s=n(586733),l=n(844255),c=n(971289),d=n(168079),u=n(678358),p=n(562615);function h({actionButton:e,auxData:t,children:n,collapseButtonElementType:h,collapseByDefault:m=!0,componentType:g,disabled:_,displayViewState:y,expandButtonElementType:x,forceTappableHeader:f,headerHeight:b,headerPaddingX:v,headerPreview:A,heading:w,icon:S,surface:j,viewParameter:P,viewType:k}){(0,r.useEffect)(()=>{(0,a.A)("CollapsibleLayout","/app/www/closeup/CollapsibleLayout.tsx")},[]);let I=(0,c.qJ)(),{isBot:z}=(0,l._8)(),{logContextEvent:E}=(0,s.o)(),{setIsShoppingModuleExpanded:T}=(0,u._G)(),C=(0,r.useRef)(null),[B,L]=(0,r.useState)(void 0),[R,M]=(0,r.useState)(_||!z&&m||null!=y&&[1,2].includes(y));return(0,d.A)(()=>{let e=C.current,t=null;if(e){let n=()=>{let t=e.scrollHeight,n=e.firstElementChild;L(t+(n?parseInt(window.getComputedStyle(n).marginTop,10):0))};n(),(t=new ResizeObserver(n)).observe(e)}return()=>{t?.disconnect()}}),(0,r.useEffect)(()=>{T&&T(!R)},[]),(0,p.jsxs)(o.so,{dataTestId:"collapsible-layout",direction:"column",gap:4*!I,children:[(0,p.jsx)(i.A,{actionButton:e,collapsed:R,disabled:_,displayViewState:y,forceTappableHeader:f,headerHeight:b,headerPaddingX:v,headerPreview:A,heading:w,icon:S,onClick:()=>{M(!R),T&&T(R),E({aux_data:t,component:g,element:R?x:h,event_type:I?101:102,view_parameter:P,view_type:k})},showArrow:!0,surface:j}),I?(0,p.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{transition:"height 600ms cubic-bezier(.25,1,.5,1)"}},"data-test-id":`collapsible-layout-content-${R?"collapsed":"expanded"}`,height:R?"0px":`${B}px`,marginBottom:R?void 0:1,overflow:"hidden",children:(0,p.jsx)(o.az,{ref:C,children:n})}):!R&&(0,p.jsx)(o.az,{children:n})]})}},409652(e,t,n){n.d(t,{A:()=>u});var a=n(61163),r=n(859471),o=n(19821),i=n(586733),s=n(567176),l=n(538329),c=n(542975),d=n(562615);function u({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:u,hasNewPin:p,onChangeButtonClick:h,onVisitButtonClick:m=()=>{},onHide:g,onUndo:_,pinImageUrl:y}){let x;(0,r.useEffect)(()=>{(0,a.A)("PostSavedPinToast","/app/www/common/PinBetterSave/PostSavedPinToast.tsx")},[]);let f=(0,l.A)(),{logContextEvent:b}=(0,i.o)();u?x={accessibilityLabel:f.bt("Visit Pin", "Visit Pin", "PostSavedPinToast.a11yVisitButton", undefined, true),label:f.bt("Visit", "Visit", "PostSavedPinToast.VisitButton", undefined, true),size:"lg",role:"button",onClick:m}:(h||_)&&(x={accessibilityLabel:p&&n&&h?f.bt("Change Pin destination", "Change Pin destination", "PostSavedPinToast.a11yChangeButton", undefined, true):f.bt("Undo saved Pin", "Undo Saved Pin", "PostSavedPinToast.a11yUndoButton", undefined, true),label:p&&n&&h?f.bt("Change", "Change", "PostSavedPinToast.ChangeButton", undefined, true):f.bt("Undo", "Undo", "PostSavedPinToast.UndoButton", undefined, true),size:"lg",role:"button",onClick:p&&n&&h?()=>h():_});let v=()=>{p&&n&&h&&b({event_type:101,component:14409})};return(0,d.jsx)(s.A,{duration:n?6e3:3e3,imageUrl:y,onHide:g,primaryAction:x,text:(0,d.jsx)(o.KJ,{overflow:"normal",size:"200",children:(0,c.$w)({text:f.bt("Saved to <a id=\"1\">{{ boardName }}</a>", "Saved to <a id=\"1\">{{ boardName }}</a>", "PostSavedPinToast.SavedToBoardToast.Message", undefined, true),markers:{boardName:e??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,d.jsx)(o.N_,{display:"block",href:n?"/me/":t??"",onClick:v,children:(0,d.jsx)(o.KJ,{lineClamp:1,size:"200",weight:"bold",children:e},"PostSavedPinToastBoardName")})}})}),thumbnail:n?{icon:(0,d.jsx)(o.In,{accessibilityLabel:f.bt("Saved to profile thumbnail", "Saved to profile thumbnail", "PostSavedPinToast.thumbnail.accessibilityLabel", undefined, true),color:"default",icon:"clock-history",size:24})}:void 0})}},745489(e,t,n){n.d(t,{A:()=>c,a:()=>l});var a=n(61163),r=n(859471),o=n(19821),i=n(114735),s=n(562615);let l={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function c({backgroundColor:e,children:t,coverImage:n,disableTabIndex:c,height:d,id:u,isHovered:p,onClick:h,onMouseDown:m,onMouseEnter:g,onMouseLeave:_,searchBoxRenderStopwatch:y,url:x,width:f}){(0,r.useEffect)(()=>{(0,a.A)("BubbleWrapper","/app/www/discover/Bubbles/BubbleWrapper.tsx")},[]);let[b,v]=(0,r.useState)(!1),A=()=>{g?g():v(!0)},w=()=>{_?_():v(!1)},S=p||b,j=S?l.hoverOverlay:l.bubbleOverlay;return(0,s.jsx)(o.$A,{href:x,onBlur:w,onFocus:A,onMouseDown:m,onMouseEnter:A,onMouseLeave:w,onTap:()=>{h?.(u)},rounding:400,tabIndex:c?-1:void 0,children:(0,s.jsx)(o.n1,{height:d,rounding:400,width:f||"100%",children:n?.url?(0,s.jsxs)(o._V,{alt:"",color:e,fit:"cover",naturalHeight:n.height??1,naturalWidth:n.width??1,onLoad:()=>{y?.stop();let e=(0,i.A)();e.isActive()&&e.stop()},role:"presentation",src:n.url,children:[(0,s.jsx)(o.az,{dangerouslySetInlineStyle:{__style:j},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,s.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},157504(e,t,n){n.d(t,{A:()=>t6});var a=n(61163),r=n(859471),o=n(979638),i=n(19821),s=n(836664),l=n(693154),c=n(538329),d=n(115795),u=n(782310);let{Provider:p,get:h}=(0,u.A)({name:"autocomplete_render",sampleRate:1}),{Provider:m,get:g}=(0,u.A)({name:"search_tab_render",sampleRate:1});var _=n(844255),y=n(177052),x=n(586733),f=n(655352),b=n(131094),v=n(562615);function A({gradientPrimaryColor:e,gradientSecondaryColor:t,gradientDirection:n,position:a}){return(0,v.jsx)(i.az,{bottom:"bottom"===a,dangerouslySetInlineStyle:{__style:{backgroundImage:`linear-gradient(${n}, ${e}, ${t})`,pointerEvents:"none"}},height:16,position:"absolute",rounding:"pill",top:"top"===a,width:"100%",zIndex:new i.rk(1)})}let w=({term:e})=>(0,v.jsx)(i.KJ,{color:"subtle",inline:!0,lineClamp:1,children:e});function S({defaultPlaceholder:e,gradientSecondaryColor:t="#FFF",height:n=48,suggestedSearchTerms:o}){let s;(0,r.useEffect)(()=>{(0,a.A)("DynamicSearchPlaceholder","/app/packages/search/DynamicSearchPlaceholder.tsx")},[]);let l=(0,c.A)(),d=o.length<3,u=(0,r.useRef)(null);return(0,v.jsx)(i.az,{ref:u,alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"dynamic-search-placeholder",display:"flex",height:n,overflow:"hidden",position:"relative",children:d?(0,v.jsx)(i.KJ,{color:"subtle",inline:!0,children:e}):(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(A,{gradientDirection:"to top",gradientPrimaryColor:"rgba(255, 255, 255, 0)",gradientSecondaryColor:t,position:"top"}),(0,v.jsx)(A,{gradientDirection:"to bottom",gradientPrimaryColor:"rgba(255, 255, 255, 0)",gradientSecondaryColor:t,position:"bottom"}),(0,v.jsxs)(i.so,{alignItems:"stretch",height:18,justifyContent:"start",children:[(0,v.jsx)(i.KJ,{color:"subtle",inline:!0,overflow:"noWrap",children:l.bt("Search for", "Search for", "searchBar.placeholder.dynamicText", undefined, true)}),(0,v.jsx)(b.A,{unsafeCSS:`
@keyframes slide-3-terms-loop {
  0%, 21.74% {
    transform: translateY(0%);
  }
  33.33%, 55.07% {
      transform: translateY(-25%);
  }
  66.66%, 88.4% {
      transform: translateY(-50%);
  }
  100% {
      transform: translateY(-75%);
  }
}
@keyframes slide-4-terms-loop {
  0%,16.3% {
    transform: translateY(0%);
  }
  25%,41.3%{
    transform: translateY(-20%);
  }
  50%,66.3%{
    transform: translateY(-40%);
  }
  75%,91.3%{
    transform: translateY(-60%);
  }
  100% {
    transform: translateY(-80%);
  }
}
@keyframes slide-5-terms-loop {
  0%, 13.04% {
    transform: translateY(0%);
  }
  20%,33.04%{
    transform: translateY(-16.66%);
  }
  40%,53.04%{
    transform: translateY(-33.33%);
  }
  60%,73.04%{
    transform: translateY(-49.98%);
  }
  80%,93.04%{
    transform: translateY(-66.64%);
  }
  100% {
    transform: translateY(-83.3%);
  }
}
`}),(0,v.jsx)(i.az,{children:(0,v.jsxs)(i.az,{dangerouslySetInlineStyle:(s=o.length,{__style:{animation:`slide-${s}-terms-loop ${2.3*(s+1)}s ease-out infinite forwards`}}),display:"inlineBlock",marginStart:1,children:[o.map(e=>(0,v.jsx)(i.az,{marginBottom:7,children:(0,v.jsx)(w,{term:e})},e)),(0,v.jsx)(i.az,{marginBottom:7,children:(0,v.jsx)(w,{term:o[0]??""})})]})})]})]})})}var j=n(168079),P=n(808666);function k(){(0,r.useEffect)(()=>{(0,a.A)("InlineACSuggestion","/app/packages/search/InlineACSuggestion.tsx")},[]);let{displayedQuery:e,inlineACSuggestion:t,logInlineSuggestionView:n}=(0,P.Z)();return(0,j.A)(()=>{n()}),(0,v.jsxs)(i.az,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},children:[(0,v.jsx)("span",{style:{visibility:"hidden"},children:(0,v.jsx)(i.KJ,{color:"disabled",inline:!0,children:e})}),(0,v.jsx)(i.KJ,{color:"subtle",inline:!0,children:t.slice(e.length)})]})}var I=n(145200),z=n(888454),E=n(184240),T=n(106386),C=n(430705),B=n(803489),L=n(532463);function R(){let e=(0,o.zy)(),{group:t}=(0,L.A)()||{group:""},n=!!t,a=n&&(0,d.dM)(e)&&e.pathname.split("/")[2]||"",i=n&&(0,d._p)(e)?(0,B.A)(e.search).query_image_pins?.toString():"",s=i||a,{setMultimodalPinId:l}=(0,P.Z)(),c=(0,T.d4)(({pins:e})=>e[s||""]),{data:u,isFetching:p}=(0,C.A)(c?null:{name:"ApiResource",options:{url:`/v3/pins/${s}/`,data:{fields:["pin.images[236x]","pin.is_unsafe"]}}}),h=c??u;return((0,r.useEffect)(()=>{i?l(i):a&&!t.includes("optin")&&h&&!h.is_unsafe?l(a):l("")},[a,i,t,l,h]),n&&!h&&p)?{pinId:s}:n&&h&&!h.is_unsafe?{pinId:s,imageData:h.images?.["236x"]}:{}}var M=n(999370);function D({disabled:e=!1,name:t,inlineSYOP:n=!1}){(0,r.useEffect)(()=>{(0,a.A)("SearchInput","/app/packages/search/SearchInput.tsx")},[]);let s=(0,c.A)(),d=(0,r.useRef)(null),u=(0,r.useRef)(void 0),{isAuth:p}=(0,l.A)(),h=(0,o.zy)(),m=(0,i.Ib)(),g=!!(0,L.A)()&&!n,{logContextEvent:_}=(0,x.o)();(0,j.A)(()=>{_({event_type:120,component:43,element:227})});let{delayedSearchBoxOpen:y,displayedQuery:A,handleInputBlur:w,handleInputChange:T,handleInputClick:C,handleInputFocus:B,handleKeyDown:D,handleKeyUp:$,suggestionsFocusIndex:U,suggestionGroups:O,inlineACSuggestion:N,isInTypeaheadSession:F,handleTypedSearchSubmit:H,multimodalPinId:V,searchBoxPlaceholder:G,searchBoxHovered:K,setVoiceSearchPlaceholder:W,suggestedSearchTerms:Y,voiceSearchPlaceholder:q}=(0,P.Z)(),J=(0,E.TR)({suggestionsFocusIndex:U,suggestionGroups:O}),{isEligiblePageTypeForDynamicSearchPlaceholder:X}=(0,I.$)(h);(0,r.useEffect)(()=>{q&&u.current&&(u.current.pathname!==h.pathname||u.current.search!==h.search)&&W(M.g.NULL),u.current=h},[h,q,W]),(0,j.A)(()=>{d.current&&H&&d.current.addEventListener("searchTrigger",H)}),(0,r.useEffect)(()=>{d.current&&(document.activeElement===d.current!==F?F?d.current.focus():d.current.blur():W(M.g.NULL))},[F,W]),(0,j.A)(()=>{!d.current||new URLSearchParams(window.location.search).get("search_box_open")&&y()});let Z=!m&&!p&&X&&!A,Q=V?s.bt("Refine your search", "Refine your search", "searchBox.searchInput.placeholder.multimodal", undefined, true):s.bt("Looking for something?", "Looking for something?", "searchBox.searchInput.placeholder.omnipresent", undefined, true),ee=Z?"":g&&Q||G||s.bt("Search", "Search", "searchBox.searchInput.placeholder", undefined, true),{imageData:et}=R(),en=V&&et&&`padding-left: ${Math.round(110*(et.width||1)/(et.height||2))+4}px !important;`||g&&!F&&!A&&"padding-left: 36px !important;"||"";return(0,v.jsxs)(i.az,{flex:"grow",height:"100%",children:[(0,v.jsx)(b.A,{unsafeCSS:`
          div:has(> textarea) {
            border-radius: 20px !important;
            ${!F?"border: none !important":""}
          }
          textarea {
            font-size: 20px !important;
            width: calc(100% - 20px) !important;
            ${en}
          }
          input::placeholder {
          color: var(--sema-color-text-subtle)${Z?"; display: none":""}
          }`}),g?(0,v.jsx)(i.fs,{ref:d,"data-test-id":"search-box-input",disabled:e,id:"omnipresent-search-box",onBlur:({event:e})=>{w(e)},onChange:({event:e})=>{T(e)},onClick:({event:e})=>{C(e)},onFocus:({event:e})=>{B(e)},onKeyDown:({event:e})=>{D(e)},onKeyUp:({event:e})=>{$(e)},placeholder:ee,rows:3,value:A}):(0,v.jsx)("input",{ref:d,"aria-activedescendant":J,"aria-autocomplete":"list","aria-controls":"SuggestionsMenu","aria-describedby":"searchBoxAccessibleText","aria-expanded":F,"aria-label":s.bt("Search", "Search", "searchBox.searchInput.placeholder", undefined, true),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off","data-gestalt-valid-html":"SearchField","data-test-id":"search-box-input",disabled:e,name:t,onBlur:w,onChange:T,onClick:C,onFocus:B,onKeyDown:D,onKeyUp:$,placeholder:ee,role:"combobox",style:{backgroundColor:"transparent",border:"none",color:"var(--sema-color-text-default)",fontFamily:f.A,fontSize:16,fontWeight:"normal",height:"100%",outline:"none",padding:"0",width:"100%"},type:"text",value:A}),!!N&&(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none",top:13}},position:"absolute",top:!0,width:"85%",children:(0,v.jsx)(k,{})}),Z&&(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",top:!0,width:"85%",children:(0,v.jsx)(S,{defaultPlaceholder:ee,gradientSecondaryColor:K?z.uq:z.kP,suggestedSearchTerms:Y})}),(0,v.jsx)(i.az,{display:"none",id:"searchBoxAccessibleText",children:s.bt("When the auto-complete results are available, use the up and down arrows to review and Enter to select. Touch device users can explore by touch or with swipe gestures.", "When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.", "searchBox.searchInput.accessibleText", undefined, true)})]})}var $=n(497384),U=n(826258),O=n(108173),N=n(890922),F=n(224723),H=n(584342);function V({contentTypes:e,contentTypesAnchor:t,handleSelectFilter:n,onDismiss:o}){return(0,r.useEffect)(()=>{(0,a.A)("ContentFilterList","/app/www/discover/SearchBox/ContentFilterList.tsx")},[]),(0,v.jsx)(i.ms,{anchor:t,disableMobileUI:!0,id:"ContentFilterList",idealDirection:"down",isWithinFixedContainer:!0,onDismiss:o,zIndex:new i.rk(H.d1),children:e.map((e,t)=>(0,v.jsx)(i.ms.Item,{dataTestId:"search-filter-"+e.dataId,onSelect:()=>n(t),option:{value:e.text,label:e.text},children:(0,v.jsx)(i.KJ,{weight:[F.cO.PINS,F.cO.PINS_MINE].includes(e.scope)?"bold":"normal",children:e.text})},e.text))})}var G=n(856865),K=n(845754);let W=function({currentlySelectedFilter:e,currentQuery:t,handleContentTypeFilterHover:n,handleScopeChange:a}){let s,l,{logContextEvent:d}=(0,x.o)(),u=(0,c.A)(),p=(l=(s=[{scope:F.cO.PINS,text:u.bt("All Pins", "All Pins", "All Pins label for content type filters on search bar", undefined, true),dataId:"all-pins"},{scope:F.cO.PINS_MINE,text:u.bt("Your Pins", "Your Pins", "Your Pins label for content type filters on search bar", undefined, true),dataId:"your-pins"}]).findIndex(e=>e.scope===F.cO.PINS_MINE),s.push(s.splice(l,1)[0]),s),h=(0,r.useRef)(null),m=(0,o.Zp)(),{enabled:g}=(0,G.A)(),[_,y]=(0,r.useState)(e||p[0].scope),[f,b]=(0,r.useState)(!1),[A,w]=(0,r.useState)(!1);(0,j.A)(()=>{d({event_type:120,view_type:2,component:215})}),(0,r.useEffect)(()=>{y(e)},[e]);let S=(p[_?p.findIndex(e=>e.scope===_):0]||p[0]).text,P=(0,v.jsx)(i.az,{ref:h,dangerouslySetInlineStyle:{__style:{borderRadius:"0 4px 4px 0",height:48}},"data-test-id":"search-filter",overflow:"hidden",children:(0,v.jsxs)(i.az,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingX:4,children:[(0,v.jsx)(i.KJ,{inline:!0,size:"200",weight:"bold",children:S}),(0,v.jsx)(i.az,{marginStart:2,children:(0,v.jsx)(i.In,{accessibilityLabel:u.bt("Dropdown", "Dropdown", " - ", undefined, true),color:"default",icon:"chevron-down",inline:!0,size:12})})]})});return(0,v.jsxs)(i.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:A?"rgba(0, 0, 0, 0.06)":void 0}},display:"flex",flex:"none",height:48,left:!0,marginStart:2,position:"relative",rounding:g?K.Xr:600,children:[(0,v.jsx)(i.Rp,{fullHeight:!0,fullWidth:!1,onMouseEnter:()=>void(w(!0),n&&n(!0)),onMouseLeave:()=>void(w(!1),n&&n(!1)),onTap:({event:e})=>{e&&(e.preventDefault(),e.stopPropagation()),b(!f),d({event_type:101,component:215,aux_data:{entered_query:t}})},rounding:600,children:P}),f&&(0,v.jsx)(V,{contentTypes:p,contentTypesAnchor:h.current,handleSelectFilter:e=>{let n=p[e].scope;y(n),b(!1),d({event_type:101,component:215,element:(e=>{switch(e){case F.cO.PINS:return 220;case F.cO.PINS_MINE:return 223;case F.cO.PINS_VIDEO:return 11399;case F.cO.BOARDS:return 221;case F.cO.USERS:return 222;default:return null}})(n),aux_data:{entered_query:t}}),a(n),t&&m(`/search/${n}/?q=${encodeURIComponent(t)}&rs=${N.I.FILTER}`)},onDismiss:()=>b(!1)})]})};var Y=n(284966);function q({children:e,hideOnScroll:t,isInTypeaheadSession:n,searchBoxHovered:a}){let[o,i]=(0,r.useState)(!1),s=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(!1),d=(0,r.useRef)(!1),u=(0,r.useRef)(!0);function p(){u.current||c.current&&!s.current&&(s.current=setTimeout(()=>{i(!0)},150))}function h(){c.current&&(!d.current&&s.current&&m(),null!==l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout(()=>{i(!1),l.current=null},2e3))}function m(){s.current&&(clearTimeout(s.current),s.current=null)}function g(){null!==l.current&&(clearTimeout(l.current),l.current=null)}return(0,r.useEffect)(()=>{let e=setTimeout(()=>{u.current=!1},600);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{c.current=t,d.current=o},[t,o]),(0,r.useEffect)(()=>{if(!o||!n&&!a)return;m(),g();let e=requestAnimationFrame(()=>{i(!1)});return()=>cancelAnimationFrame(e)},[o,n,a]),(0,r.useEffect)(()=>{o||m()},[o]),(0,j.A)(()=>{let e=(0,Y.A)(p,10),t=(0,Y.A)(h,10);return window.addEventListener("scroll",e),window.addEventListener("scrollend",t),()=>{window.removeEventListener("scroll",e),window.removeEventListener("scrollend",t),m(),g()}}),e({isHidden:o,updateHiddenState:i})}var J=n(385800);function X(){(0,r.useEffect)(()=>{(0,a.A)("MultimodalSearchPinImage","/app/www/discover/SearchBox/MultimodalSearchPinImage.tsx")},[]);let{imageData:e,pinId:t=""}=R(),{width:n,height:o,url:s}=e||{},{hovered:l,onMouseEnter:d,onMouseLeave:u}=(0,J.A)(),{multimodalPinId:p,setMultimodalPinId:h,handleClearSearch:m}=(0,P.Z)(),g=(0,c.A)(),_=p?110:54,y=p?(n||1)/(o||2)*_:54;return s&&(0,v.jsxs)(i.az,{alignItems:"end",dangerouslySetInlineStyle:{__style:{left:4,bottom:4}},display:"flex",justifyContent:"center",position:"absolute",children:[(0,v.jsx)(i.az,{height:_,position:"relative",rounding:400,width:y,children:(0,v.jsxs)(i.Rp,{onMouseDown:({event:e})=>{e.preventDefault(),e.stopPropagation()},onMouseEnter:d,onMouseLeave:u,onTap:()=>{p?m({clearMultimodalPinId:!0}):h(t)},rounding:400,children:[(0,v.jsx)(i.n1,{height:_,rounding:400,wash:!0,width:y,children:(0,v.jsx)(i._V,{alt:g.bt("Search with this Pin", "Search with this Pin", "MultimodalSearchPinImage.image.altText", undefined, true),fit:"cover",naturalHeight:_,naturalWidth:y,src:s,children:(0,v.jsx)(i.n1,{height:"100%",wash:l,width:"100%"})})}),(0,v.jsx)(i.az,{bottom:!0,padding:1,position:"absolute",right:!0,children:(0,v.jsx)(i.K0,{accessibilityLabel:p?g.bt("Remove", "Remove", "MultimodalSearchPinImage.removeButton.accessibilityLabel", undefined, true):g.bt("Add", "Add", "MultimodalSearchPinImage.addButton.accessibilityLabel", undefined, true),bgColor:"default",icon:p?"close":"plus",size:"xs"})})]})}),(0,v.jsx)(i.az,{padding:1,children:(0,v.jsx)(i.Ex,{text:g.bt("Beta", "Beta", "searchbox.multimodalSearch.betaBadge", undefined, true)})})]})}function Z({hasAppliedQuery:e,onClear:t,inlineSYOP:n}){(0,r.useEffect)(()=>{(0,a.A)("ClearSearchButton","/app/www/discover/SearchBox/SearchBoxActions/ClearSearchButton.tsx")},[]);let o=(0,c.A)(),s=!!(0,L.A)()&&!n,{logContextEvent:l}=(0,x.o)();return(0,j.A)(()=>{l({event_type:120,view_type:2,component:43,element:73})}),(0,v.jsx)(i.az,{alignItems:"center",dangerouslySetInlineStyle:s?{__style:{bottom:60}}:void 0,"data-test-id":"search-cancel",display:"flex",height:48,justifyContent:"center",position:s?"absolute":void 0,right:!!s,width:48,children:(0,v.jsx)(i.n1,{rounding:e&&!s?300:400,children:(0,v.jsx)(i.K0,{accessibilityLabel:o.bt("Remove search input", "Remove search input", "searchBox.removeSearchInput.accessibilityLabel", undefined, true),icon:e&&!s?"close":"circle-close",iconColor:"default",onClick:t,padding:e&&!s?2:void 0,size:e&&!s?"sm":"lg"})})})}var Q=n(299374),ee=n(49241);let et="MULTIPLE_IMAGES",en="NO_FILE",ea="URL_VALIDATION",er="UNSUPPORTED_FORMAT",eo="DATA_URL_INVALID",ei="REMOTE_URL_FAILED",es="NO_RESULTS",el="GENERIC";class ec extends Error{constructor(e,t){var n,a;super(e,t),(n="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n="name","string"))?a:a+"")in this?Object.defineProperty(this,n,{value:"LensError",enumerable:!0,configurable:!0,writable:!0}):this[n]="LensError",this.type=e}}let ed=e=>e.bt("Something went wrong. Please try again", "Something went wrong. Please try again", "lens.error.uploadFailed", undefined, true),eu=(e,t)=>{switch(t){case et:return e.bt("Upload a single image and try again.", "Upload a single image and try again.", "lens.error.multipleImages", undefined, true);case en:return e.bt("No image found. Try dragging an image file.", "No image found. Try dragging an image file.", "lens.error.noFile", undefined, true);case ea:return e.bt("Double check the image URL and try again.", "Double check the image URL and try again.", "lens.error.urlValidation", undefined, true);case er:return e.bt("Something went wrong. Upload a .jpg, .gif, .png, .tif or .webp file or an image link.", "Something went wrong. Upload a .jpg, .gif, .png, .tif, or .webp file or an image link.", "lens.error.unsupportedFormat", undefined, true);case eo:return e.bt("Unable to load image from URL. Try a different image.", "Couldn't load image from URL. Try a different image.", "lens.error.dataUrlInvalid", undefined, true);case ei:return e.bt("Unable to add link. Try saving and uploading the image.", "Unable to add link. Try saving and uploading the image.", "lens.error.remoteUrlFailed", undefined, true);case es:return e.bt("No results found for this image. Try uploading another image.", "No results found for this image. Try uploading another image.", "lens.error.noResults", undefined, true);default:return ed(e)}};var ep=n(196861);async function eh(e,t){return new Promise((n,a)=>{e.toBlob(e=>{e?n(e):a(Error("Canvas toBlob failed"))},t,ee.Et)})}async function em(e,t,n=er){var a;let r,o=await (0,ep.A)({file:e,i18n:t,ideaPinRenamingEnabled:!1,options:{allowVideo:!1}});if("error"===o.type)throw new ec(n,{cause:o.message||"File validation failed"});let i=await createImageBitmap(e),{width:s,height:l}=i,c=s>ee.Dj?ee.Dj/s:1,[d,u]=[Math.round(s*c),Math.round(l*c)],p=document.createElement("canvas");p.width=d,p.height=u;let h=p.getContext("2d");if(!h)throw i.close(),new ec(el,{cause:"Failed to create canvas context"});h.drawImage(i,0,0,d,u),i.close();let m=p.toDataURL(ee.g0,ee.Et);return{file:new File([await eh(p,ee.g0)],((r=(a=e.name).lastIndexOf("."))>0?a.slice(0,r):a)+ee.WK,{type:ee.g0}),src:m,width:d,height:u}}var eg=n(910409);async function e_(e,t){let n,a=e.split(",")[1];if(!a)throw new ec(eo,{cause:"Missing base64 data in data URL"});try{n=(0,eg.A)(a)}catch(e){throw new ec(eo,{cause:e||"Failed to decode base64 image"})}return em(n,t,eo)}var ey=n(257300);async function ex(e){let t,n;try{t=await (0,ey.A)({url:ee.UQ,method:"GET",data:{url:e}})}catch(e){throw new ec(ei,{cause:e})}let a=t.resource_response.data?.image_file;if(!a)throw new ec(ei,{cause:"Missing image_file in V3_LENS_UPLOAD_HANDLER response"});try{n=(0,eg.A)(a)}catch(e){throw new ec(ei,{cause:e||"Failed to decode base64 image from server"})}let r=await createImageBitmap(n),{width:o,height:i}=r;r.close();let s=`data:${n.type};base64,${a}`;return{file:n,src:s,width:o,height:i}}function ef(e,t){return e.startsWith("data:image")?()=>e_(e,t):()=>ex(e)}var eb=n(542975),ev=n(997737),eA=n(543219);let ew={border:"2px dashed #dadada",borderRadius:"16px",pointerEvents:"none"};function eS({error:e,isDisabled:t=!1,setValidationError:n,uploadImage:o}){(0,r.useEffect)(()=>{(0,a.A)("LensFileUpload","/app/common/react/components/Lens/Uploader/Popover/FileUpload/LensFileUpload.tsx")},[]);let s=(0,c.A)(),{handleFileSelect:l,handleFileAndUrlDrop:d}=function({isDisabled:e,setValidationError:t,uploadImage:n}){let a=(0,c.A)(),{logContextEvent:r}=(0,x.o)();return{handleFileSelect:o=>{if(e)return;let i=function(e){if(e&&e.length>1)return{type:"multipleFiles"};let t=e?.[0];return t?{type:"file",file:t}:{type:"noFile"}}(o.target.files);switch(r({component:ee.SY,element:14558,event_type:15656,view_type:ee.CR}),i.type){case"file":n(()=>em(i.file,a),ee.nb,"file");break;case"multipleFiles":t(eu(a,et));break;case"noFile":t(eu(a,en))}},handleFileAndUrlDrop:o=>{if(e)return;let i=function(e){let t=e.types.includes("text/uri-list"),n=e.getData("text/uri-list").split(`
`).find(e=>e&&!e.startsWith("#"))??null,{files:a}=e;return n?{type:"url",url:n,fromBrowser:!0}:a.length>1?{type:"multipleFiles",fromBrowser:t}:1===a.length&&a[0]?{type:"file",file:a[0],fromBrowser:!1}:t?{type:"invalidUrl",fromBrowser:!0}:{type:"noFile",fromBrowser:!1}}(o.dataTransfer);switch(r({component:ee.SY,event_type:i.fromBrowser?3502:3501,view_type:ee.CR}),i.type){case"url":n(ef(i.url,a),ee.cr,"file");break;case"file":n(()=>em(i.file,a),ee.nb,"file");break;case"multipleFiles":t(eu(a,et));break;case"invalidUrl":t(eu(a,ea));break;case"noFile":t(eu(a,en))}}}}({isDisabled:t,setValidationError:n,uploadImage:o});return(0,v.jsx)(eA.A,{accept:ev.oA.join(","),accessibilityLabel:s.bt("File upload", "File Upload", "lens.upload.fileUpload", undefined, true),allowMultipleFiles:!1,dropRounding:16,hasError:!!e,id:"lens-photo-upload-input",onChange:l,onDrop:d,children:()=>(0,v.jsx)(i.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:ew},direction:"column",display:"flex",minHeight:280,children:(0,v.jsxs)(i.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:70}},direction:"column",display:"flex",children:[(0,v.jsx)(i.In,{accessibilityLabel:s.bt("Upload photo", "Upload photo", "lens.photo.upload.icon", undefined, true),color:e?"error":"dark",icon:e?"circle-exclamation-point":"circle-arrow-up",size:24}),(0,v.jsx)(i.so,{alignItems:"center",direction:"column",justifyContent:"start",children:(0,v.jsxs)(i.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginTop:4,children:[!!e&&(0,v.jsx)(i.az,{marginBottom:4,width:320,children:(0,v.jsx)(i.KJ,{align:"center",color:"error",children:e})}),(0,v.jsx)(i.KJ,{align:"center",inline:!0,children:(0,eb.vQ)(s.bt("Drag an image here or {{ chooseFile }}", "Drag an image here or {{ chooseFile }}", "lens.popover.uploadTip.dragImage", undefined, true),{chooseFile:(0,v.jsx)(i.KJ,{inline:!0,underline:!0,children:s.bt("choose a file", "choose a file", "lens.popover.uploadTip", undefined, true)},"lens-choose-file")})})]})})]})})})}var ej=n(277229),eP=n(348681),ek=n(284387),eI=n(726329),ez=n(750612);function eE(){(0,r.useEffect)(()=>{(0,a.A)("LensHistoryCarousel","/app/common/react/components/Lens/Uploader/Popover/History/LensHistoryCarousel.tsx")},[]);let e=(0,c.A)(),t=(0,o.zy)(),n=(0,o.Zp)(),{logContextEvent:s}=(0,x.o)(),{setIsPopoverOpen:l}=(0,Q.S)(),d=ee.Gj,{items:u,isLoaded:p,renderItem:h}=(0,ej.A)({buttonPadding:2,height:229,hideSave:!0,pageSize:10,viewParameter:d,viewType:119,width:163}),m=p&&u.length>0,g=!m,_="/lens-search/history"===t.pathname,y=e.bt("Your uploads", "Your uploads", "lens.history.header", undefined, true),f=e.bt("View all", "View all", "lens.history.viewAll", undefined, true);(0,eP.r)(m?{component:15075,element:14560,view_type:119}:null);let b=(0,eI.bi)({componentType:15075,impressionType:"Story",loggingId:"lens-history-carousel-impression-logging-id",viewType:119});return(0,v.jsx)(i.az,{ref:b,marginBottom:2,paddingY:3,children:(0,v.jsx)(ez.A,{actionButton:(0,v.jsx)(i.$n,{disabled:g,onClick:({event:e})=>{e.stopPropagation(),s({component:15075,element:14560,event_type:101,view_type:119}),l(!1),_||n("/lens-search/history")},text:f}),collapseButtonElementType:14560,collapseByDefault:!0,componentType:15075,disabled:g,expandButtonElementType:14560,headerPaddingX:10,heading:y,icon:"compact-chevron-down",viewType:119,children:(0,v.jsx)(i.az,{marginTop:3,paddingX:6,children:(0,v.jsx)(ek.A,{inset:"none",itemHeight:229,items:u,itemWidth:163,mode:"multi",renderItem:({item:e})=>h(e),showNavigationButtons:!0,showScrollMarkers:!0})})})})}function eT({onDismiss:e}){(0,r.useEffect)(()=>{(0,a.A)("LensPopoverHeader","/app/common/react/components/Lens/Uploader/Popover/LensPopoverHeader.tsx")},[]);let t=(0,c.A)();return(0,v.jsx)(i.az,{padding:6,children:(0,v.jsxs)(i.so,{alignItems:"center",justifyContent:"between",children:[(0,v.jsx)(i._Y,{accessibilityLevel:1,size:"400",children:t.bt("Upload an image to search", "Upload an image to search", "lens.popover.header", undefined, true)}),(0,v.jsx)(i.K0,{accessibilityLabel:t.bt("Close", "Close", "lens.popover.close", undefined, true),icon:"close",iconColor:"default",onClick:e,size:"lg"})]})})}function eC(){(0,r.useEffect)(()=>{(0,a.A)("LensUploadingOverlay","/app/common/react/components/Lens/Uploader/Popover/LensUploadingOverlay.tsx")},[]);let e=(0,c.A)().bt("Uploading image", "Uploading Image", "lens.loading.message", undefined, true);return(0,v.jsx)(i.az,{bottom:!0,color:"default",left:!0,margin:"auto",position:"absolute",right:!0,top:!0,children:(0,v.jsxs)(i.so,{alignItems:"center",direction:"column",gap:{row:0,column:6},height:"100%",justifyContent:"center",width:"100%",children:[(0,v.jsx)(i.y$,{accessibilityLabel:e,show:!0}),(0,v.jsx)(i.Wu,{children:e})]})})}var eB=n(483877);let eL="lens-url-input";function eR({error:e,isDisabled:t=!1,setValidationError:n,uploadImage:o}){(0,r.useEffect)(()=>{(0,a.A)("LensUrlUpload","/app/common/react/components/Lens/Uploader/Popover/UrlUpload/LensUrlUpload.tsx")},[]);let s=(0,c.A)(),{inputValue:l,handleInputChange:d,handleSubmit:u,handleKeyDown:p}=function({isDisabled:e,setValidationError:t,uploadImage:n}){let a=(0,c.A)(),{logContextEvent:o}=(0,x.o)(),[i,s]=(0,r.useState)(""),l=()=>{if(!e&&i){if(o({component:ee.SY,element:14559,event_type:15656,view_type:ee.CR}),!i.startsWith("data:image")&&!(0,eB.A)({url:i}))return void t(eu(a,ea));n(ef(i,a),ee.cr,"url")}};return{inputValue:i,handleInputChange:e=>{s(e),t("")},handleSubmit:l,handleKeyDown:e=>{"Enter"===e.key&&l()}}}({isDisabled:t,setValidationError:n,uploadImage:o});return(0,v.jsxs)(i.az,{paddingY:4,position:"relative",children:[(0,v.jsx)(b.A,{unsafeCSS:`
          #${eL} {
            padding-right: 52px !important;
          }
        `}),(0,v.jsx)(i.A_,{autoComplete:"url",disabled:t,errorMessage:e,hasError:!!e,id:eL,label:s.bt("Upload from URL", "Upload from URL", "lens.url.label", undefined, true),labelDisplay:"hidden",onChange:({value:e})=>d(e),onKeyDown:({event:e})=>p(e),placeholder:s.bt("Paste image link", "Paste image link", "lens.url.textField", undefined, true),size:"lg",type:"url",value:l}),(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{top:26}},paddingX:3,position:"absolute",right:!0,children:(0,v.jsx)(i.K0,{accessibilityLabel:s.bt("Submit", "Submit", "lens.url.submitButton", undefined, true),bgColor:"secondary",disabled:!l||t,icon:"chevron-right",onClick:u,size:"sm"})})]})}var eM=n(417978),eD=n(703672),e$=n(672908);let eU={x:0,y:0,w:1,h:1};async function eO(e,t){let n=new FormData;n.append("image",e),n.append("x",String(eU.x)),n.append("y",String(eU.y)),n.append("w",String(eU.w)),n.append("h",String(eU.h));let a=await (0,eM.A)({url:ee.hU,type:"POST",data:n}).promise;if(!a.responseText)throw new ec(el,{cause:"Empty response from server"});let r=JSON.parse(a.responseText);if(!r.success)throw new ec(el,{cause:r.error||"Upload not successful"});if(!r.data||0===r.data.length)throw new ec(es,{cause:r.error||"Empty data in the response"});if(!r.url)throw new ec(el,{cause:r.error||"Missing API URL in response"});let o=r.url,i={url:ee.b0,data:{url:o,crop_source:5,...eU,add_fields:e$.A.base_grid_item.join(",")}};return t((0,eD.O8)("ApiResource",i,{resource_response:{data:r.data??[],error:null},bookmarks:r.bookmark?[r.bookmark]:[]})),o}var eN=n(350539),eF=n(808571);function eH({anchor:e,onDismiss:t,searchBoxRef:n}){(0,r.useEffect)(()=>{(0,a.A)("LensPopover","/app/common/react/components/Lens/Uploader/Popover/LensPopover.tsx")},[]);let s=(0,c.A)(),l=(0,eF.g)(),{isUploading:d,fileError:u,setFileError:p,urlError:h,setUrlError:m,uploadImage:g}=function({onDismiss:e}){let t=(0,c.A)(),n=(0,T.wA)(),a=(0,o.Zp)(),{pathname:i}=(0,o.zy)(),{setPreparedImage:s}=(0,Q.S)(),[l,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),g=e=>{p(e),e&&m("")},_=e=>{m(e),e&&p("")},y=async(r,o,l)=>{let c="file"===l?g:_;c(""),d(!0);try{let t,{file:l,src:c,width:d,height:u}=await r(),p=await eO(l,n);(t=new FormData).append("image",l),t.append("source_type",o),(0,eM.A)({url:ee.SK,type:"PUT",data:t});let h={file:l,src:c,apiUrl:p,width:d,height:u};s(h),(0,eN.i6)(h),"/lens-search"!==i&&a("/lens-search/"),e()}catch(e){c(e instanceof ec?eu(t,e.type):ed(t))}finally{d(!1)}};return{isUploading:l,fileError:u,setFileError:g,urlError:h,setUrlError:_,uploadImage:y}}({onDismiss:t});if((0,eP.r)({component:ee.SY,view_type:ee.CR}),!e)return null;let _=n?.current?.getBoundingClientRect(),y=document.documentElement.clientWidth,x=_?y-_.right:0,f=`calc(100vh - ${l}px - ${ee.qm}px)`;return(0,v.jsx)(i.Wd,{zIndex:ee.B4,children:(0,v.jsx)(i.AM,{accessibilityLabel:s.bt("Lens popover", "Lens popover", "lens.popover.accessibilityLabel", undefined, true),anchor:e,coordinates:{top:l,end:x},idealDirection:"down",onDismiss:t,position:"fixed",positionRelativeToAnchor:!1,size:"flexible",children:(0,v.jsxs)(i.az,{position:"relative",width:ee.J8,children:[(0,v.jsx)(eT,{onDismiss:t}),(0,v.jsxs)(i.az,{dangerouslySetInlineStyle:{__style:{maxHeight:f}},overflow:"auto",position:"relative",children:[(0,v.jsxs)(i.az,{paddingX:6,children:[(0,v.jsx)(eS,{error:u,isDisabled:d,setValidationError:p,uploadImage:g}),(0,v.jsx)(eR,{error:h,isDisabled:d,setValidationError:m,uploadImage:g})]}),(0,v.jsx)(eE,{}),d&&(0,v.jsx)(eC,{})]})]})})})}function eV({searchBoxRef:e}){(0,r.useEffect)(()=>{(0,a.A)("LensButton","/app/www/discover/SearchBox/SearchBoxActions/LensButton.tsx")},[]);let t=(0,c.A)(),{logContextEvent:n}=(0,x.o)(),{isPopoverOpen:o,setIsPopoverOpen:s,setLensButtonMounted:l}=(0,Q.S)(),d=(0,r.useRef)(null);(0,j.A)(()=>(l(!0),n({component:43,element:1304,event_type:120}),()=>l(!1)));let u=(0,r.useCallback)(()=>{s(!o),n({component:43,element:1304,event_type:101})},[o,s,n]);return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(i.K0,{ref:d,accessibilityLabel:t.bt("Lens", "Lens", "searchBox.lens.accessibilityLabel", undefined, true),icon:"search-by-image",onClick:u,tooltip:{text:t.bt("Upload image", "Upload image", "searchBox.lens.tooltip", undefined, true),idealDirection:"down",zIndex:K.Yo}}),o&&(0,v.jsx)(eH,{anchor:d.current,onDismiss:()=>s(!1),searchBoxRef:e})]})}var eG=n(601185);function eK(){return"u">typeof window&&("webkitSpeechRecognition"in window||"SpeechRecognition"in window)}var eW=n(457315),eY=n(640992);let eq={v:"4.8.0",meta:{g:"LottieFiles AE 3.6.0",a:"",k:"",d:"",tc:""},fr:25,ip:0,op:75,w:24,h:24,nm:"lottie_loop_3_sec",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Shape Layer 5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22.062,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-4.75],[-10.125,4.688]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:5,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-.703],[-10.125,.641]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:12,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.685],[-10.125,7.748]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:20,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:25,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-5.704],[-10.125,5.714]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:32,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3.25],[-10.125,3.194]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:39,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-4.544],[-10.125,4.522]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:45,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-.703],[-10.125,.641]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:52,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.685],[-10.125,7.748]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:67,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.685],[-10.125,7.748]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:71,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-5.451],[-10.125,5.474]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-4.75],[-10.125,4.688]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[17.047,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-7.875],[-10.141,7.875]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:7,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:18,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.135,-6.147],[-10.135,6.125]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:27,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.165,-1.59],[-10.165,1.514]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:38,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-7.875],[-10.141,7.875]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:46,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.154,-4.346],[-10.154,4.304]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:53,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.151,-4.706],[-10.151,4.668]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:63,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.165,-1.59],[-10.165,1.514]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:71,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.135,-6.147],[-10.135,6.125]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-7.875],[-10.141,7.875]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[12.031,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:13,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.145,-5.963],[-10.145,5.901]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:24,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-.622],[-10.141,.622]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:33,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.154,-6.64],[-10.154,6.587]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:42,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-.622],[-10.141,.622]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:50,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.156,-7.75],[-10.156,7.688]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.15,-4.91],[-10.15,4.872]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:67,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.154,-6.64],[-10.154,6.587]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[7.016,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-6.062],[-10.109,5.688]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:10,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:20,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-7.688],[-10.109,7.562]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:29,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-.938],[-10.141,.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:39,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-4.734],[-10.117,4.456]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:46,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-.938],[-10.141,.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:56,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-5.148],[-10.121,5.07]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:65,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-1.818],[-10.137,1.802]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-6.062],[-10.109,5.688]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:7,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.688],[-10.125,7.562]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:17,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:26,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-5.438],[-10.125,5.413]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:33,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-1.062],[-10.125,1]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:40,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-6.851],[-10.125,6.734]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:50,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.688],[-10.125,7.562]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:70,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0}],markers:[{tm:75,cm:"",dr:0}]};function eJ(){(0,r.useEffect)(()=>{(0,a.A)("AudioBars","/app/www/inclusiveProduct/VoiceSearch/AudioBars.tsx")},[]);let e=(0,c.A)().bt("Listening...", "Listening...", "searchBox.voiceSearch.accessibilityLabel", undefined, true),{animationContainerRef:t}=(0,eY.A)({animationData:eq,loop:!0,autoplay:!0,renderer:"svg",rendererSettings:{title:e},onDOMLoaded:()=>{let e=t.current?.querySelector("svg");e&&e.setAttribute("role","img")}});return(0,v.jsx)(i.so,{alignItems:"center",height:48,justifyContent:"center",width:48,children:t?(0,v.jsx)(i.n1,{height:24,width:24,children:(0,v.jsx)(i.az,{ref:t})}):(0,v.jsx)(i.In,{accessibilityLabel:e,color:"default",icon:"audio-bars",size:24})})}var eX=n(79906);function eZ({onCloseClick:e}){(0,r.useEffect)(()=>{(0,a.A)("VoiceSearchPermissionsModal","/app/www/inclusiveProduct/VoiceSearch/VoiceSearchPermissionsModal.tsx")},[]);let t=(0,c.A)(),{logContextEvent:n}=(0,x.o)();(0,j.A)(()=>{n({event_type:13,view_type:2,component:15282})});let o=()=>{n({event_type:101,view_type:2,component:15282,element:75}),e()};return(0,v.jsx)(eX.Ay,{accessibilityModalLabel:t.bt("Voice search permissions modal", "Voice search permissions modal", "voiceSearch.accessibilityLabel", undefined, true),align:"start",heading:(0,v.jsx)(i._Y,{accessibilityLevel:1,size:"600",children:t.bt("Want to use voice search?", "Want to use voice search?", "voiceSearch.modal.header", undefined, true)}),isOpen:!0,onDismiss:o,size:"sm",children:(0,v.jsxs)(i.az,{direction:"column",display:"flex",paddingX:7,children:[(0,v.jsx)(i.KJ,{children:t.bt("Go to your browser settings to let Pinterest access the microphone", "Go to your browser settings to let Pinterest access the microphone", "voiceSearch.modal.message", undefined, true)}),(0,v.jsx)(i.az,{display:"flex",justifyContent:"end",marginBottom:6,marginTop:7,children:(0,v.jsx)(i.$n,{accessibilityLabel:t.bt("Close", "Close", "voiceSearch.close.button", undefined, true),color:"primary",onClick:o,size:"md",text:t.bt("Close", "Close", "voiceSearch.close.button", undefined, true)})})]})})}function eQ(){(0,r.useEffect)(()=>{(0,a.A)("VoiceSearchEntryPoint","/app/www/discover/SearchBox/SearchBoxActions/VoiceSearchEntryPoint.tsx")},[]);let e=(0,c.A)(),{logContextEvent:t}=(0,x.o)(),{checkExperiment:n}=(0,eG.A)(),{handleTextChange:o,handleVoiceSearchSubmit:s,voiceSearchPlaceholder:l,setVoiceSearchPlaceholder:d}=(0,P.Z)(),[u,p]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),g=(0,r.useRef)(null),_=n("web_lens",{dangerouslySkipActivation:!0}).anyEnabled;(0,r.useEffect)(()=>{m(eK())},[]),(0,j.A)(()=>{t({event_type:120,view_type:2,component:43,element:15977})});let y=(0,r.useCallback)(()=>{g.current&&(g.current.stop(),d(M.g.NULL))},[d]);if((0,r.useEffect)(()=>{l===M.g.CANCEL&&(y(),d(M.g.NULL))},[l,y,d]),!h)return null;let f=async()=>{t({event_type:101,view_type:2,component:43,element:15977});try{let e,n=await navigator.permissions.query({name:"microphone"});if("denied"===n.state){d(M.g.NULL),p(!0);return}let a=new(window.webkitSpeechRecognition||window.SpeechRecognition);g.current=a,a.lang="en-US",a.interimResults=!1,e=void 0,o(""),d(M.g.NULL),a.onstart=()=>{d(M.g.LISTENING)},a.onresult=t=>{let n=t.results?.[0]?.[0]?.transcript;n&&(e=n)},a.onerror=e=>{d(null),"permission-denied"===e.error&&p(!0)},a.onend=()=>{e&&l!==M.g.CANCEL?(s(e),d(null)):"prompt"===n.state?d(null):(t({event_type:16683,view_type:2,component:43,aux_data:{reason:"voice search miss"}}),d(M.g.DEFAULT)),e=void 0},a.start()}catch(e){t({event_type:16683,view_type:2,component:43,aux_data:{error_message:(0,eW.A)(e,"message")}})}};return(0,v.jsxs)(r.Fragment,{children:[l===M.g.LISTENING?(0,v.jsx)(eJ,{}):(0,v.jsx)(i.K0,{accessibilityLabel:e.bt("Voice search", "Voice search", "searchBox.voiceSearch.accessibilityLabel", undefined, true),icon:"microphone",iconColor:"default",onClick:f,tooltip:_?{text:e.bt("Search by voice", "Search by voice", "searchBox.voice.tooltip", undefined, true),idealDirection:"down",zIndex:K.Yo}:void 0}),u&&(0,v.jsx)(eZ,{onCloseClick:()=>p(!1)})]})}function e0({displayedQuery:e,inlineSYOP:t,hasAppliedQuery:n,hasTypedSinceFocus:o,isInTypeaheadSession:s,isPartner:c,onClearSearch:d,searchBoxRef:u,showContentTypeFilter:p,voiceSearchPlaceholder:h}){(0,r.useEffect)(()=>{(0,a.A)("SearchBoxActions","/app/www/discover/SearchBox/SearchBoxActions/SearchBoxActions.tsx")},[]);let{showCancel:m,showLens:g,showVoice:y}=function({displayedQuery:e,hasTypedSinceFocus:t,isInTypeaheadSession:n,isPartner:a,showContentTypeFilter:r,voiceSearchPlaceholder:o}){let{country:i,language:s}=(0,_._8)(),c=(0,l.A)(),{checkExperiment:d}=(0,eG.A)(),u=c.isAuth,p=eK(),h=o===M.g.LISTENING,m=u&&d("web_lens",{dangerouslySkipActivation:!0}).anyEnabled,g=p&&u&&"US"===i&&s.startsWith("en")&&d("web_voice_search").anyEnabled;if(h)return{state:"voiceListening",showCancel:!0,showLens:!1,showVoice:!0};if(e)if(t)return{state:"typing",showCancel:!0,showLens:!1,showVoice:g};else return{state:"filled",showCancel:!0,showLens:m,showVoice:g};return d("dweb_search_clear_search").anyEnabled?{state:"empty",showCancel:!1,showLens:m,showVoice:g}:{state:"empty",showCancel:!!e||a&&r||n,showLens:m,showVoice:g}}({displayedQuery:e,hasTypedSinceFocus:o,isInTypeaheadSession:s,isPartner:c,showContentTypeFilter:p,voiceSearchPlaceholder:h}),x=!!(0,L.A)()&&!t;return(0,v.jsxs)(i.az,{alignItems:"center",dangerouslySetInlineStyle:x?{__style:{bottom:4}}:void 0,display:"flex",marginEnd:1,marginStart:3,position:x?"absolute":void 0,right:!!x,children:[m&&(0,v.jsx)(Z,{hasAppliedQuery:n,inlineSYOP:t,onClear:d}),g&&!t&&(0,v.jsx)(eV,{searchBoxRef:u}),y&&!t&&(0,v.jsx)(eQ,{})]})}var e1=n(987628),e2=n(652567);let e3={recentSaves:[],recentViews:[]};function e6(e,t){if(e=e||e3,"FETCH_COMPLETE"!==t.type)return e;{let{options:n={},resource:a}=t.payload,{data:r}=t.payload.response.resource_response;if("ApiResource"===a&&"/v3/users/me/recent/engaged/pin/stories/"===n.url&&r){let t=r.find(e=>"user_recently_viewed_pins"===e.story_type),n=r.find(e=>"user_recently_saved_pins"===e.story_type),a=t?.objects.map(({description:e,id:t,images:n},a)=>({label:e,images:n,resultIndex:a,type:"recent_view",url:`/pin/${t}`}))||[],o=n?.objects.map(({description:e,id:t,images:n},a)=>({label:e,images:n,resultIndex:a,type:"recent_save",url:`/pin/${t}`}))||[];return{...e,recentSaves:o,recentViews:a}}return e}}let{Provider:e5,get:e4}=(0,e1.A)("SearchBox");function e7({children:e}){let[t,n]=(0,r.useReducer)(e6,e3),a=(0,r.useCallback)(e=>{n({type:"FETCH_COMPLETE",payload:e})},[]);(0,e2.jY)("ApiResource",a);let o=(0,r.useMemo)(()=>({state:t}),[t]);return(0,v.jsx)(e5,{value:o,children:e})}var e8=n(75840),e9=n(971289);function te({autocompleteRequestSurface:e}){let t=(0,e9.qJ)(),n=(0,l.A)();return(0,e8.A)(n.isAuth?{name:"AdvancedTypeaheadResource",options:{term:"",pin_scope:F.cO.PINS,autocomplete_request_surface:e},noCache:!0}:null),(0,e8.A)(t?{name:"SearchTabResource"}:null),null}let tt=(0,n(16917).A)("autocomplete_render");var tn=n(114735),ta=n(621556),tr=n(24086),to=n(406661),ti=n(319571),ts=n(668014),tl=n(296221);let tc=({children:e,impressionTrackerProps:t})=>((0,r.useEffect)(()=>{(0,a.A)("MaybeImpressionTracker","/app/packages/impression-logging/MaybeImpressionTracker.tsx")},[]),t?(0,v.jsx)(eI.g$,{...t,children:e}):e({impressionTrackerRef:null}));var td=n(618243),tu=n(386379);function tp({onLoad:e,suggestion:t}){(0,r.useEffect)(()=>{(0,a.A)("AutocompleteUpsellSuggestions","/app/www/discover/SearchBox/AutocompleteUpsellSuggestions.tsx")},[]);let n=(0,tu.A)({url:t.action_button_uri});return(0,r.useEffect)(()=>{e()},[]),(0,v.jsxs)(i.az,{padding:10,children:[(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{color:"#004b91",fontSize:"28px",WebkitFontSmoothing:"antialiased"}},marginBottom:6,children:t.description}),(0,v.jsx)(i.$A,{href:t.action_button_uri,rel:n?"nofollow":"none",rounding:"pill",children:(0,v.jsx)(i.az,{color:"info",display:"inlineBlock",padding:3,rounding:"pill",children:(0,v.jsx)(i.KJ,{color:"inverse",weight:"bold",children:t.action_button_text})})})]})}var th=n(323250),tm=n(528045),tg=n(464224);let t_=(0,r.lazy)(()=>n.e("58329").then(n.bind(n,521344)));function ty({experiences:e,index:t,focusedIndex:n,onSuggestionMouseEnter:a,onSuggestionMouseLeave:o,onLoad:s,query:l,suggestion:c}){let d=(0,tm.A)(c),{handleSuggestionSelect:u,handleInclusiveProductFilterClick:p,getSuggestionImpressionOptions:h}=(0,P.Z)();return(0,r.useEffect)(()=>{c.image||s()},[]),(0,v.jsx)(tl.cO,{experiences:e,placementId:1000315,searchTerm:l,suggestions:[c],children:({searchDelightConfig:e})=>(0,v.jsx)(tc,{impressionTrackerProps:h({index:t,groupIndex:t,suggestion:c,loggingId:c.id}),children:({impressionTrackerRef:r})=>(0,v.jsxs)(i.az,{ref:r,marginBottom:1,marginEnd:-3,marginStart:-3,children:[(0,v.jsx)(th.m,{id:(0,E.mc)(0,t),isHovered:n===t,onClick:()=>{u({suggestion:c,index:t})},onMouseEnter:()=>{a(t)},onMouseLeave:()=>{o()},url:(0,E.R7)({suggestion:c,query:l}),children:(0,v.jsx)(i.so,{alignItems:"center",justifyContent:"start",children:(0,v.jsx)(i.az,{flex:"grow",children:(0,v.jsx)(th.A,{highlightMatch:!0,imageUrl:c.image,label:c.label,onLoad:s,query:l,rounding:2,searchDelightConfig:e,subLabel:c.subLabel,type:c.type})})})}),!!d&&d!==tg.zB.BODY&&p&&(0,v.jsx)(i.so,{alignItems:"center",justifyContent:"start",overflow:"hidden",children:(0,v.jsx)(ts.A,{name:"SafeSuspense_BlendedTypeaheadSuggestion_InclusiveFilters",children:(0,v.jsx)(td.A,{children:(0,v.jsx)(t_,{filters:{[d]:c.modified_filter_eligibility?.[d]?.filter_options},moduleType:tg.P4.SEARCH_AUTOCOMPLETE,onClickApplyFilters:e=>p(c,t,e),query:l,viewParameter:103,viewType:2})})})})]})})})}let tx=({index:e,focusedIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:a,onLoad:r,suggestion:o})=>{let{handleSuggestionSelect:s,getSuggestionImpressionOptions:l}=(0,P.Z)();return(0,v.jsx)(tc,{impressionTrackerProps:l({index:e,groupIndex:e,suggestion:o,loggingId:o.id}),children:({impressionTrackerRef:l})=>(0,v.jsx)(i.az,{ref:l,marginBottom:1,marginEnd:-3,marginStart:-3,children:(0,v.jsx)(th.m,{id:(0,E.mc)(0,e),isHovered:t===e,onClick:()=>{s({suggestion:o,index:e})},onMouseEnter:()=>{n(e)},onMouseLeave:()=>{a()},url:o.url,children:(0,v.jsx)(th.A,{imageUrl:o.image,isVerifiedMerchant:o.is_verified_merchant,label:o.label,onLoad:r,rounding:"circle",subLabel:o.subLabel,verified:o.verified})})},`${o.type}-${o.label}-${o.subLabel||""}`)})};function tf({experiences:e,suggestions:t,focusedIndex:n,query:o,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s}){(0,r.useEffect)(()=>{(0,a.A)("BlendedTypeaheadSuggestion","/app/www/discover/SearchBox/BlendedTypeaheadSuggestion.tsx")},[]);let l=h(),c=e=>"image"in e&&e.image,d=t.some(c),u=()=>{l?.stop(),tt.isActive()&&tt.stop()};return t.map((t,a)=>{let r=!d||c(t);switch(t.type){case"autocompleteupsell":return(0,v.jsx)(tp,{onLoad:r?u:()=>{},suggestion:t},`search-suggestion-${t.type}-${t.id}`);case"query":case"recent_pin_searches":return(0,v.jsx)(ty,{experiences:e,focusedIndex:n,index:a,onLoad:r?u:()=>{},onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,query:o,suggestion:t},`search-suggestion-${t.type}-${t.id}`);case"user":return(0,v.jsx)(tx,{focusedIndex:n,index:a,onLoad:r?u:()=>{},onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,suggestion:t},`search-suggestion-${t.type}-${t.id}`);default:return null}})}var tb=n(65881),tv=n(241037),tA=n(733048),tw=n(745489),tS=n(713364),tj=n(535078);function tP({contextLogData:e,dominantColor:t,groupIndex:n,height:o,icon:s,images:l,isDarkRep:d=!1,isHovered:u,title:p,onMouseEnter:h,onMouseLeave:m,onClick:g,searchBoxRenderStopwatch:_,suggestion:y,showRemoveButton:x=!1,slotIndex:f,url:b,width:A}){(0,r.useEffect)(()=>{(0,a.A)("SearchInFeedRep","/app/common/react/components/discover/stories/SearchInFeedRep.tsx")},[]);let w=(0,c.A)(),{autocompleteRequestSurface:S,getSuggestionImpressionOptions:j,isSyop:k}=(0,P.Z)(),{group:I,anyEnabled:z}=(0,tS.A)({isSyop:k}),E=(0,tj.A)(S),T=I.includes("vertical"),C=o||80,B=l&&l[0]&&l[0]["236x"]?.url||"";(0,tv.A)("search_tab_render",B,"recent_query"===y.type?"200x":"236x");let L=!!s&&(0,tA.A)(s),R=!!A&&A<160||!!o&&o<60,M=R&&!z?"200":"300",D=z?void 0:"bold",$=(R||z)&&2||3,U=R&&2||z&&3||4,O=A?A-C:156,N=R?300:400,F=R?300:400,H=R?200:300,V=R?200:300,G=()=>{_?.stop();let e=(0,tn.A)();e.isActive()&&e.stop()},K=async e=>{await (0,ey.A)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}}),E()};return(0,v.jsx)(tc,{impressionTrackerProps:j({index:f,additionalAuxData:e,groupIndex:n,suggestion:y,loggingId:y.id}),children:({impressionTrackerRef:e})=>(0,v.jsx)(i.az,{ref:e,"data-test-id":x?"recent-query":void 0,height:C,width:A||"100%",children:(0,v.jsx)(i.n1,{rounding:N,wash:!d&&!T,children:(0,v.jsxs)(i.az,{dangerouslySetInlineStyle:z?void 0:{__style:d&&{backgroundColor:u?"var(--base-color-grayscale-350)":"var(--base-color-grayscale-400)"}||u&&tw.a.lightHoverOverlay||{}},children:[(0,v.jsx)(th.m,{isHovered:u,onBlur:()=>{},onClick:g,onFocus:h,onMouseEnter:h,onMouseLeave:m,rounding:F,url:b,children:(0,v.jsxs)(i.so,{direction:"row",children:[(0,v.jsx)(i.az,{"data-test-id":"search-suggestion-image-container",flex:"none",height:C,padding:z?1:void 0,width:C,children:B?(0,v.jsx)(i.n1,{height:"100%",rounding:z?H:void 0,wash:!0,width:"100%",children:(0,v.jsx)(i._V,{alt:"",color:t,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:G,role:"presentation",src:B})}):(0,v.jsx)(i.az,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",rounding:z?V:void 0,width:"100%",children:(0,v.jsx)(i.In,{accessibilityLabel:"",color:"dark",icon:"magnifying-glass",size:24})})}),(0,v.jsxs)(i.az,{alignItems:"center",display:"flex",flex:"grow",maxHeight:C,maxWidth:z?void 0:O,padding:U,children:[L&&(0,v.jsx)(i.az,{alignItems:"center",display:"flex",flex:"none",marginEnd:2,children:(0,v.jsx)(i.In,{accessibilityLabel:"",icon:L,inline:!0,size:14})}),(0,v.jsx)(i.KJ,{color:d?"light":void 0,dataTestId:"search-suggestion-text",lineClamp:$,size:M,weight:D,children:p})]}),x&&(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{visibility:u?"visible":"hidden"}},"data-test-id":"clear-recent-queries",display:"flex",flex:"none",marginEnd:2,marginStart:-1,children:(0,v.jsx)(i.K0,{accessibilityLabel:w.bt("Remove recent search", "Remove recent search", "Remove recent search icon in search autocomplete", undefined, true),bgColor:"default",focusColor:"darkBackground",icon:"close",iconColor:"default",onClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),K(p)},padding:2,size:"sm"})})]})}),x&&(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{visibility:u?"visible":"hidden"}},"data-test-id":"clear-recent-queries",marginEnd:2,marginTop:7,onMouseEnter:h,onMouseLeave:m,position:"absolute",right:!0,top:!0,children:(0,v.jsx)(i.K0,{accessibilityLabel:w.bt("Remove recent search", "Remove recent search", "Remove recent search icon in search autocomplete", undefined, true),focusColor:"darkBackground",icon:"close",iconColor:"default",onClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),K(p)},padding:2,size:"sm"})})]})})})})}var tk=n(284247),tI=n(989457);function tz({coverImage:e,creator:t,formattedTitle:n,height:o,id:s,impressionTrackerRef:l,inheritedIsHovered:c,onClick:d,onMouseDown:u,onMouseEnter:p,onMouseLeave:h,searchBoxRenderStopwatch:m,url:g,width:_}){(0,r.useEffect)(()=>{(0,a.A)("SimpleBubble","/app/www/discover/Bubbles/SimpleBubble.tsx")},[]);let y=t?.avatar_color_index;return(0,v.jsx)(tw.A,{ref:l,backgroundColor:"gray",coverImage:e,disableTabIndex:!0,height:o,id:s,isHovered:c,onClick:d,onMouseDown:u,onMouseEnter:p,onMouseLeave:h,searchBoxRenderStopwatch:m,url:g,width:_,children:(0,v.jsx)(i.az,{ref:l,alignItems:"end",display:"flex",height:o,justifyContent:"center",padding:3,position:"absolute",top:!0,width:_||"100%",children:(0,v.jsxs)(i.so,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[o>200?(0,v.jsx)(i._Y,{align:"center",color:"light","data-test-id":"sp-bubble-title",size:"600",children:n}):(0,v.jsx)(i.KJ,{align:"center",color:"light","data-test-id":"sp-bubble-subtitle",weight:"bold",children:n}),t&&t.image_small_url&&t.full_name&&(0,v.jsxs)(i.az,{alignItems:"center","data-test-id":"sp-bubble-creator",display:"flex",justifyContent:"center",marginTop:4,children:[(0,v.jsx)(i.az,{marginEnd:2,children:(0,v.jsx)(tI.eu,{color:y,name:t.full_name,outline:!0,size:"xs",src:t.image_small_url})}),(0,v.jsx)(i.KJ,{color:"light",size:"100",children:t.full_name})]})]})})})}var tE=n(194046);function tT({board:e,height:t,isHovered:n,searchBoxRenderStopwatch:o,slotIndex:i,storyId:s,storyType:l,viewParameter:c,viewType:d,width:u,...p}){(0,r.useEffect)(()=>{(0,a.A)("EditorialBoardBubble","/app/www/discover/Bubbles/EditorialBoardBubble.tsx")},[]);let{id:h,name:m,image_cover_hd_url:g,owner:_,url:y}=e,x=(0,tk.A)(m||"",{});return m&&h&&y?(0,v.jsx)(tE.D6,{auxData:{grid_index:i.toString(),board_id:h,story_type:l,story_id:s},loggingId:h,objectIdStr:h,slotIndex:i,viewParameter:c||3467,viewType:d,children:({impressionTrackerRef:e})=>(0,v.jsx)(tz,{coverImage:{url:g},creator:_,formattedTitle:x,height:t,id:h,impressionTrackerRef:e,inheritedIsHovered:n,searchBoxRenderStopwatch:o,url:y,width:u,...p})}):null}var tC=n(755817);function tB({component:e,height:t,isHovered:n,searchBoxRenderStopwatch:o,slotIndex:i,storyId:s,storyType:l,todayArticle:c,viewParameter:d,viewType:u,width:p,...h}){(0,r.useEffect)(()=>{(0,a.A)("TodayArticleBubble","/app/www/discover/Bubbles/TodayArticleBubble.tsx")},[]);let{id:m,title:g,image_urls:_,article_creator_user:y,feed_source:x,is_product_pin_feed:f}=c,b=_&&_.length>0?{url:_[0]}:void 0,A=(0,tk.A)(g||"",{});if(!g||!m)return null;let w=(0,tC.oF)(x??0,f??!1,g,m);return(0,v.jsx)(tE.hK,{auxData:{grid_index:i.toString(),today_article_id:m,story_type:l,story_id:s},component:e,loggingId:m,objectIdStr:m,slotIndex:i,viewParameter:d||3467,viewType:u,children:({impressionTrackerRef:e})=>(0,v.jsx)(tz,{coverImage:b,creator:y,formattedTitle:A,height:t,id:m,impressionTrackerRef:e,inheritedIsHovered:n,searchBoxRenderStopwatch:o,url:w,width:p,...h})})}function tL(e){(0,r.useEffect)(()=>{(0,a.A)("TatSpBubble","/app/www/discover/Bubbles/TatSpBubble.tsx")},[]);let{bubble:t}=e;return"board"===t.type?(0,v.jsx)(tT,{...e,board:t}):(0,v.jsx)(tB,{...e,todayArticle:t})}function tR({children:e,prototypeSLP:t,containerWidth:n,repType:o="default"}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionsGrid","/app/www/discover/SearchBox/SuggestionsGrid.tsx")},[]);let{checkExperiment:s}=(0,eG.A)(),l=s("dweb_ac_empty_state_new_user_onboarding_exp",{dangerouslySkipActivation:!0}).group,c=!!(0,L.A)();return t?(0,v.jsx)(i.xA,{columnGap:2,rowGap:2,templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:`repeat(${c?3:2}, 1fr)`,lg:`repeat(${c?3:4}, 1fr)`,xl:`repeat(${c?3:4}, 1fr)`,xxl:"repeat(4, 1fr)"},children:e({width:void 0,height:"trending"===o&&72||"nux"===o&&"enabled_4reps"===l&&110||88})}):(0,v.jsx)(i.so,{alignItems:"stretch",direction:"row",gap:2,justifyContent:"start",wrap:!0,children:e(function({containerWidth:e}){let t,n=4,a=t=>e?(e-(64+8*(t-1)))/t:236;for(t=a(4);t<177&&n>1;)n-=1,t=a(n);for(;t>354;)n+=1,t=a(n);let r=Math.max(60,t/2.6);return{width:t,height:r}}({containerWidth:n}))})}function tM({title:e,action:t,prototypeSLP:n}){return(0,v.jsxs)(i.az,{alignItems:"center","data-test-id":"suggestion-group-heading",display:"flex",justifyContent:"between",marginEnd:2,children:[n?(0,v.jsx)(i.az,{marginEnd:1,paddingX:1,children:(0,v.jsx)(i._Y,{lineClamp:1,size:"400",children:e})}):(0,v.jsx)(i._Y,{lineClamp:1,size:"300",children:e}),n&&t&&(0,v.jsx)(i.so.Item,{flexBasis:"shrink",children:(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{top:2}},position:"relative",children:(0,v.jsx)(i.pp,{onMouseEnter:t.onFocus,onMouseLeave:t.onBlur,children:(0,v.jsx)(i.Rp,{onBlur:t.onBlur,onFocus:t.onFocus,onTap:t.onClick,children:(0,v.jsx)(i.KJ,{color:"subtle",children:(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{lineHeight:1}},children:t.text})})})})})})]})}let tD=({handleRemove:e,id:t,isHovered:n,label:a,onClick:r,onMouseEnter:o,onMouseLeave:s,removeA11yText:l,url:c})=>(0,v.jsx)(i.az,{"aria-selected":n?"true":"false","data-test-id":"search-suggestion",id:t,marginBottom:2,marginEnd:2,role:"option",children:(0,v.jsx)(i.$A,{accessibilityLabel:a,href:c,onMouseEnter:o,onMouseLeave:s,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{e.metaKey||e.ctrlKey||(t(),e.preventDefault(),r())},rounding:"pill",children:(0,v.jsxs)(i.az,{alignItems:"center",color:n?void 0:"secondary",dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",...n?{backgroundColor:"#dadada"}:{}}},display:"flex",paddingX:3,paddingY:1,position:"relative",rounding:"pill",children:[(0,v.jsx)(i.KJ,{align:"center",children:a}),(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{paddingTop:"2px"}},"data-test-id":"clear-recent-queries",marginStart:2,children:(0,v.jsx)(i.K0,{accessibilityLabel:l??"",icon:"close",iconColor:"default",onClick:({event:t})=>{t.stopPropagation(),t.preventDefault(),e?.(a)},size:"xs"})})]})})}),t$=({id:e,isHovered:t,onClick:n,onMouseEnter:a,onMouseLeave:o,showSeeMoreOverlay:s,suggestion:l,trackClick:d,url:u})=>{let p=(0,c.A)();return(0,v.jsx)(i.az,{"aria-selected":t?"true":"false","data-test-id":"search-suggestion",id:e,marginBottom:2,paddingX:1,role:"option",children:(0,v.jsx)(i.$A,{href:u||l.url,onMouseEnter:a,onMouseLeave:o,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),d(),e.metaKey||e.ctrlKey||u||(e.preventDefault(),n())},rounding:300,tabIndex:-1,children:(0,v.jsxs)(i.n1,{height:116,rounding:300,wash:t,width:90,children:[l.images["236x"]?.url&&(0,v.jsx)(i._V,{alt:l.label,fit:"cover",naturalHeight:l.images["236x"]?.height??1,naturalWidth:l.images["236x"]?.width??1,src:l.images["236x"].url}),s&&(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(i.az,{dangerouslySetInlineStyle:O.t5,height:116,left:!0,position:"absolute",top:!0,width:90}),(0,v.jsx)(i.az,{alignItems:"center",display:"flex",height:116,justifyContent:"center",padding:3,position:"absolute",top:!0,width:90,children:(0,v.jsx)(i.KJ,{align:"center",color:"inverse",dataTestId:"see-more-suggestions-overlay",weight:"bold",children:p.bt("See more", "See More", "searchBox.suggestionGroups.recentPinRep.seeMoreText", undefined, true)})})]})]})})})},tU=({componentType:e,focusedIndex:t,groupIndex:n,keyPrefix:a,onSuggestionMouseEnter:r,onSuggestionMouseLeave:o,seeMoreUrl:s,suggestions:l,title:c})=>{let{logContextEvent:d}=(0,x.o)(),{handleSuggestionSelect:u}=(0,P.Z)();return(0,v.jsxs)(i.so,{dataTestId:`${a}_section`,direction:"column",gap:4,children:[(0,v.jsx)(i.so,{width:"100%",children:(0,v.jsx)(tM,{title:c})}),(0,v.jsx)(i.so,{alignItems:"stretch",justifyContent:"start",width:"100%",wrap:!0,children:l.map((i,c)=>{let p=6===c&&7===l.length;return(0,v.jsx)(t$,{id:(0,E.mc)(n,c),isHovered:t===c,onClick:()=>{u({suggestion:i,index:c})},onMouseEnter:()=>{r(c)},onMouseLeave:()=>{o()},showSeeMoreOverlay:p,suggestion:i,trackClick:()=>{d({event_type:101,component:e,element:p?179:12374,view_type:2,view_parameter:103})},url:p?s:i.url},`${a}-${c}`)})})]})};function tO({focusedIndex:e,groupIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,suggestions:i}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let s=(0,c.A)();return(0,eP.r)({component:13844,view_parameter:103,view_type:2}),(0,v.jsx)(tU,{componentType:13844,focusedIndex:e,groupIndex:t,keyPrefix:"recent_save",onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,seeMoreUrl:"/me/pins/",suggestions:i,title:s.bt("Recently saved", "Recently saved", "searchBox.recentSavedSuggestions.heading", undefined, true)})}function tN({suggestion:e,groupIndex:t,index:n,focusedIndex:a,onSuggestionMouseEnter:r,onSuggestionMouseLeave:o}){let{handleSuggestionSelect:s,getSuggestionImpressionOptions:l,autocompleteRequestSurface:d}=(0,P.Z)(),u=(0,tj.A)(d),p=(0,c.A)(),h=async e=>{await (0,ey.A)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}}),u()},m=p.bt("Remove", "Remove", "Remove recent search in search typeahead suggestion", undefined, true);return(0,v.jsx)(tc,{impressionTrackerProps:l({index:n,groupIndex:t,suggestion:e,loggingId:e.id}),children:({impressionTrackerRef:l})=>(0,v.jsx)(i.az,{ref:l,"data-test-id":"recent-query",children:(0,v.jsx)(tD,{handleRemove:h,id:(0,E.mc)(t,n),isHovered:a===n,label:e.label,onClick:()=>{s({suggestion:e,index:n})},onMouseEnter:()=>{r(n)},onMouseLeave:()=>{o()},removeA11yText:m,url:(0,E.R7)({suggestion:e,query:""})})},`${e.type}-${e.label}`)})}function tF({containerWidth:e,focusedIndex:t,groupIndex:n,onSuggestionMouseEnter:o,onSuggestionMouseLeave:s,searchBoxRenderStopwatch:l,suggestions:d}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let u=(0,c.A)(),{isSyop:p}=(0,P.Z)(),{anyEnabled:h}=(0,tS.A)({isSyop:p}),{handleSuggestionSelect:m}=(0,P.Z)(),g=(0,E.Dq)({pillLabels:d.map(e=>e.label),maxWidth:e});return(0,v.jsxs)(i.so,{direction:"column",gap:4,children:[(0,v.jsx)(tM,{prototypeSLP:h,title:u.bt("Recent searches", "Recent searches", "Recent searches heading in search autocomplete", undefined, true)}),h?(0,v.jsx)(tR,{containerWidth:e,numItems:d.length,prototypeSLP:h,repType:"recentSearch",children:({width:e,height:a})=>d.map((r,i)=>(0,v.jsx)(tP,{groupIndex:n,height:a,images:r.image_preview_pins?.map(e=>({"236x":{...e.image_medium_size_pixels,url:e.image_medium_url}})),isHovered:t===i,onClick:()=>{m({suggestion:r,index:i})},onMouseEnter:()=>{o(i)},onMouseLeave:()=>{s()},searchBoxRenderStopwatch:l,showRemoveButton:!0,slotIndex:i,suggestion:r,title:r.label,url:(0,E.R7)({suggestion:r,query:""}),width:e},r.label))}):(0,v.jsx)(i.az,{display:"flex",overflow:"hidden",position:"relative",children:d.slice(0,g).map((e,a)=>(0,v.jsx)(tN,{focusedIndex:t,groupIndex:n,index:a,onSuggestionMouseEnter:o,onSuggestionMouseLeave:s,suggestion:e},e.label))})]})}function tH({focusedIndex:e,groupIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,suggestions:i}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let s=(0,c.A)();return(0,eP.r)({component:13843,view_parameter:103,view_type:2}),(0,v.jsx)(tU,{componentType:13843,focusedIndex:e,groupIndex:t,keyPrefix:"recent_view",onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,seeMoreUrl:"/recently-viewed/",suggestions:i,title:s.bt("Recently viewed", "Recently viewed", "searchBox.recentSavedSuggestions.heading", undefined, true)})}function tV({groupIndex:e,focusedIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,searchBoxRenderStopwatch:s,suggestions:l}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let{id:c,items:d,story_type:u,title:{format:p}}=l,{handleSuggestionSelect:h,getSuggestionImpressionOptions:m}=(0,P.Z)(),g=d.map(({type:e,id:t})=>e+":"+t).join("|");return(0,v.jsxs)(i.so,{direction:"column",gap:4,children:[(0,v.jsx)(tM,{title:p}),(0,v.jsx)(tc,{impressionTrackerProps:m({additionalAuxData:{content_ids:g,story_id:c,story_type:u},suggestion:d[0],index:e,groupIndex:e,loggingId:c}),children:({impressionTrackerRef:a})=>(0,v.jsx)(i.az,{ref:a,display:"flex",marginBottom:5,wrap:!0,children:d.map((a,r)=>{let l=t===r;return(0,v.jsx)(i.az,{"aria-selected":l?"true":"false","data-test-id":"search-suggestion-today-bubble",id:(0,E.mc)(e,r),marginBottom:2,paddingX:1,role:"option",children:(0,v.jsx)(tL,{bubble:a,component:13525,height:192,isHovered:l,onClick:()=>{h({suggestion:a,index:r})},onMouseEnter:()=>{n(r)},onMouseLeave:()=>{o()},searchBoxRenderStopwatch:s,slotIndex:r,storyId:c,storyType:u,viewParameter:3467,viewType:2,width:192})},`story--${e}-${r}`)})})})]})}function tG({containerWidth:e,focusedIndex:t,groupIndex:n,index:o,onSuggestionMouseEnter:s,onSuggestionMouseLeave:l,searchBoxRenderStopwatch:c,suggestions:d}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let{logContextEvent:u}=(0,x.o)(),{isSyop:p}=(0,P.Z)(),[h,m]=(0,r.useState)(!1),{action:g,id:_,items:y,story_type:f,title:{format:b}}=d,A=y[0]&&"explorearticle"===y[0].type&&y[0].story_category,{anyEnabled:w}=(0,tS.A)({isSyop:p}),S="shopping_spotlight"===f,{handleSuggestionSelect:j,getSuggestionImpressionOptions:k}=(0,P.Z)(),I=y.map(({type:e,id:t})=>e+":"+t).join("|"),z=(0,tj.A)(0),T=async e=>{await (0,ey.A)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}})},C=g&&g.text?{text:g.text,onClick:()=>{d.custom_properties?.recent_searches?.forEach(e=>T(e)),z()},onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}:void 0;return(0,v.jsxs)(i.so,{dataTestId:"search-story-suggestions-container",direction:"column",gap:4,children:[(0,v.jsx)(tM,{action:C,prototypeSLP:w,title:b}),(0,v.jsx)(tc,{impressionTrackerProps:k({additionalAuxData:{content_ids:I,story_id:_,story_type:f},suggestion:y[0],index:n,groupIndex:n,loggingId:_}),children:({impressionTrackerRef:a})=>(0,v.jsx)(i.az,{ref:a,children:(0,v.jsx)(tR,{containerWidth:e,numItems:y.length,prototypeSLP:w,repType:2===A&&"trending"||"search_tab_nux_topic_articles"===f&&"nux"||"default",children:({width:e,height:a})=>y.map((r,d)=>{let p=o+d;if(S){let{id:e}=r;return(0,v.jsx)(tL,{bubble:r,height:192,onClick:()=>{u({component:200,event_type:101,view_parameter:3467,view_type:2,aux_data:{article_id:e,autocomplete_type:"recommended_article",story_type:f}})},onMouseDown:({event:e})=>e.preventDefault(),slotIndex:p,viewParameter:3467,viewType:2,width:192},`ss-bubble-${e}`)}{let o=h||t===p,{cover_images:u,dominant_colors:m,id:g,story_category:y,title:{format:x},subtitle:b,identifier_icon_type:A}=r,w=(0,E.R7)({suggestion:r,query:"",suggestionStoryId:_});return(0,v.jsx)(i.az,{"aria-selected":o?"true":"false","data-test-id":"search-suggestion",id:(0,E.mc)(n,d),role:"option",children:(0,v.jsx)(tP,{contextLogData:{story_type:f,content_ids:I,grid_index:d,story_id:_},dominantColor:m?.[0]??"",groupIndex:n,height:a,icon:A,images:u,isHovered:o,onClick:()=>{j({suggestion:r,index:p,suggestionStoryId:_})},onMouseEnter:()=>{s(p)},onMouseLeave:()=>{l()},searchBoxRenderStopwatch:c,slotIndex:p,subtitle:b?.format,suggestion:r,title:x,url:w,width:e})},`story-${y??""}-${n}-${g}`)}})})})})]})}var tK=n(508537),tW=n(586754),tY=n(743858);function tq({inlineSYOP:e,query:t,searchBoxHeight:n,searchBoxRenderStopwatch:o,showSyopHeading:s,suggestionGroups:l,width:d}){let u;(0,r.useEffect)(()=>{(0,a.A)("SuggestionsMenu","/app/www/discover/SearchBox/SuggestionsMenu.tsx")},[]);let p=(0,r.useRef)(null),h=(0,c.A)(),{experiencesMulti:m}=(0,to.A)(1000315),{enabled:g}=(0,tW.A)(),{enabled:y}=(0,tY.A)(),x=g||y,{country:f,isAuthenticated:b}=(0,_._8)(),{suggestionsFocusIndex:A,suggestionsMaxHeight:w,setSuggestionsHovered:S,setSuggestionsFocusIndex:j,handleFeaturedBoardSubmit:k,isSyop:I,multimodalPinId:z}=(0,P.Z)(),{anyEnabled:T}=(0,tS.A)({isSyop:I}),[C,B]=(0,r.useState)(0),R=(0,tr.A)(B,400),M=(0,tK.wt)(b,f),{isRTL:D}=(0,_._8)();function $(){j(void 0)}(0,r.useLayoutEffect)(()=>{if(!p.current)return()=>{};B(p.current.getBoundingClientRect().width);let e=new ResizeObserver(()=>{R(e=>p.current?.getBoundingClientRect().width||e)});return e.observe(p.current),()=>{e.disconnect()}},[R]);let U=!!(0,L.A)()&&!e,O=U||e,N=O&&"32px"||x&&`0 0 ${K.Ak}px ${K.Ak}px`||"0 0 16px 16px",F=(u="-24px",U?{left:u,bottom:u}:e?{left:u,top:u}:x?g?D?{right:"-16px",left:"-24px",top:n}:{left:"-16px",right:"-24px",top:n}:{left:"-24px",right:"-12px",top:n}:{top:n});return(0,v.jsx)(ti.A,{view:2,viewParameter:103,children:l.length>0||z?(0,v.jsxs)(i.az,{color:"default",dangerouslySetInlineStyle:{__style:{borderRadius:N,...F,zIndex:O?-5:void 0}},id:"SuggestionsMenu",left:!0,overflow:"hidden",position:"absolute",role:"listbox",width:O&&"calc(100% + 48px"||d||"100%",children:[(0,v.jsx)("div",{"data-test-id":"typeaheadResults",onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),style:{maxHeight:U?738:w,boxSizing:"content-box",overflowY:"auto"},children:(0,v.jsxs)(i.az,{ref:p,color:"default",dangerouslySetInlineStyle:{__style:{borderRadius:N,paddingBottom:U?142:"4px",paddingTop:e&&72||T&&"28px"||"32px"}},direction:"column",display:"flex",overflow:"hidden",width:"100%",children:[s&&(0,v.jsx)(i.az,{marginBottom:4,marginStart:8,marginTop:4,children:(0,v.jsx)(i._Y,{size:"600",children:t.length>0?(0,eb.vQ)(h.bt("Search your Pins for {{ query }}", "Search your Pins for {{ query }}", "searchBox.suggestionsMenu.searchYourPinsForQueryText", undefined, true),{query:t}):h.bt("Search your Pins", "Search your Pins", "searchBox.suggestionsMenu.searchYourPinsText", undefined, true)})}),z?(0,v.jsx)(i.az,{alignItems:"center",display:"flex",justifyContent:"start",marginBottom:3,marginTop:-2,paddingX:6,children:(0,v.jsx)(i._Y,{color:"subtle",size:"200",children:h.bt("You can add just about anything to update your search results", "You can add just about anything to update your search results", "searchBox.suggestionsMenu.multimodalSearch.youCanAddJustAboutAnythingToUpdateYourSearchResultsText", undefined, true)})}):l.map((e,n)=>e.items.length?(0,v.jsx)(i.az,{marginBottom:T&&!U?9:4,paddingX:8,children:function(e,n,a){let r=(0,E.n6)(l),i=null==A?void 0:A-r[n],s=e=>{j((0,E.n6)(l)[n]+e)};if("story"===e.type&&"shopping_spotlight"===e.story_type&&M)return(0,v.jsx)(tb.A,{handleFeaturedBoardSubmit:k});switch(e.type){case"recent_query":return(0,v.jsx)(tF,{containerWidth:a,focusedIndex:i,groupIndex:n,onSuggestionMouseEnter:s,onSuggestionMouseLeave:$,searchBoxRenderStopwatch:o,suggestions:e.items});case"recent_save":return(0,v.jsx)(tO,{focusedIndex:i,groupIndex:n,onSuggestionMouseEnter:s,onSuggestionMouseLeave:$,suggestions:e.items});case"recent_view":return(0,v.jsx)(tH,{focusedIndex:i,groupIndex:n,onSuggestionMouseEnter:s,onSuggestionMouseLeave:$,suggestions:e.items});case"story":return"shopping_spotlight"===e.story_type?(0,v.jsx)(tV,{containerWidth:a,focusedIndex:i,groupIndex:n,index:0,onSuggestionMouseEnter:s,onSuggestionMouseLeave:$,searchBoxRenderStopwatch:o,suggestions:e}):(0,v.jsx)(tG,{containerWidth:a,focusedIndex:i,groupIndex:n,index:0,onSuggestionMouseEnter:s,onSuggestionMouseLeave:$,searchBoxRenderStopwatch:o,suggestions:e});case"blended_autocomplete":return(0,v.jsx)(tf,{experiences:m,focusedIndex:i,onSuggestionMouseEnter:s,onSuggestionMouseLeave:$,query:t,suggestions:e.items})}return null}(e,n,C)},`${t}-${e.type}-${e.title?.format??""}`):null)]})}),U&&!z&&(0,v.jsx)(i.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, var(--sema-color-background-transparent) 0%, var(--sema-color-background-default) 20%)",pointerEvents:"none",transition:"opacity 0.1s"}},height:172,left:!0,position:"absolute",width:"100%"})]}):(0,v.jsx)(i.az,{})})}function tJ({inlineSYOP:e,searchBoxHeight:t,suggestionGroups:n,width:o}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionsMenuContainer","/app/www/discover/SearchBox/SuggestionsMenuContainer.tsx")},[]);let i=(0,$.A)({shouldSkipExpActivation:!0}),s=g(),c=(0,tn.A)(),d=h(),{isBot:u}=(0,_._8)(),p=(0,l.A)(),{checkExperiment:m}=(0,eG.A)(),{autocompleteRequestSurface:y,enteredScope:x,enteredQuery:f,updateSuggestionGroups:b,isInTypeaheadSession:A,isSyop:w,multimodalPinId:S}=(0,P.Z)();(0,r.useEffect)(()=>{A&&!w&&(f?(d?.isTiming&&d?.abort("pivoted"),d?.start()):s?.isTiming||s?.start(),f?(tt.isActive()&&tt.abort("pivoted"),tt.start()):c.isActive()||c.start())},[A,w,f]);let{data:j}=(0,C.A)(u?null:{name:"SearchTabResource"}),{state:{recentSaves:k,recentViews:I}}=e4(),{items:z,isLoaded:E}=(0,ta.H)({autocompleteRequestSurface:y}),T=(0,ta.c)({query:f,scope:x,autocompleteRequestSurface:y});return((0,r.useEffect)(()=>{p.isAuth&&j&&j.length>0&&E&&z.length<9&&m("dweb_ac_empty_state_new_user_onboarding_exp")},[z,j,p.isAuth,m,E]),(0,r.useEffect)(()=>{let e=j||[],t=p.isAuth?e.filter(e=>"shopping_spotlight"!==e.story_type):e;b(w?[{items:z,type:"recent_query"},{items:I,type:"recent_view"},{items:k,type:"recent_save"}]:f.length?T:[{items:z,type:"recent_query"},...t||[]])},[T,w,b,f,j,z,k,I,x,p]),i)?null:A&&(n.length>0||S)&&(0,v.jsx)(tq,{inlineSYOP:e,query:f,searchBoxHeight:t,searchBoxRenderStopwatch:s,showSyopHeading:w,suggestionGroups:n,width:o})}var tX=n(106301),tZ=n(116432);function tQ({children:e}){(0,r.useEffect)(()=>{(0,a.A)("CloseupDelayedSearchBoxWrapper","/app/www/VerticalNav/auth/CloseupDelayedSearchBoxWrapper.tsx")},[]);let t=(0,o.zy)(),n=function(){let{group:e}=(0,L.A)()||{group:""},t=(0,o.zy)();return!!(e&&e.includes("delay"))&&(0,d.dM)(t)}(),[s,l]=(0,r.useState)(!1),c=(0,r.useRef)(0);return((0,r.useEffect)(()=>{n&&(c.current=Date.now());let e=setTimeout(()=>l(!1),0);return()=>clearTimeout(e)},[n,t.pathname]),(0,r.useEffect)(()=>{if(n){let e=()=>{Date.now()-c.current<400||l(!0)},t=setTimeout(()=>{window.scrollY>30&&l(!0)},400),n=setTimeout(()=>l(!0),1e4);return window.addEventListener("scroll",e),()=>{clearTimeout(t),clearTimeout(n),window.removeEventListener("scroll",e)}}return()=>{}},[n,t.pathname]),n&&!s)?(0,v.jsx)(i.az,{"data-test-id":"search-box-container",id:O.rv}):(0,v.jsx)(r.Fragment,{children:e})}function t0(e){let t=e.getBoundingClientRect(),n=window.innerHeight-240;return t.bottom<=n}function t1({children:e}){(0,r.useEffect)(()=>{(0,a.A)("SyopDelayedSearchBoxWrapper","/app/www/VerticalNav/auth/SyopDelayedSearchBoxWrapper.tsx")},[]);let t=(0,o.zy)(),n=(0,d.mi)(t),s=function(){let{group:e}=(0,L.A)()||{group:""},t=(0,o.zy)();return!!(e&&(0,d.mi)(t))}(),[l,c]=(0,r.useState)(!1),u=(0,r.useRef)(c);return((0,r.useEffect)(()=>{u.current=c},[c]),(0,r.useEffect)(()=>{if(!n){let e=setTimeout(()=>c(!1),0);return()=>clearTimeout(e)}},[n]),(0,r.useEffect)(()=>{if(!s)return;let e=document.getElementById(O.C3),t=e=>{let t=()=>{t0(e)&&u.current(!0)};requestAnimationFrame(t);let n=setTimeout(t,150),a=new IntersectionObserver(t=>{void 0!==t[0]&&t0(e)&&u.current(!0)},{rootMargin:"0px 0px -240px 0px",threshold:0});return a.observe(e),()=>{clearTimeout(n),a.disconnect()}};if(null!==e)return t(e);let n=null,a=new MutationObserver(()=>{let e=document.getElementById(O.C3);null!==e&&(a.disconnect(),n=t(e))});return a.observe(document.body,{childList:!0,subtree:!0}),()=>{a.disconnect(),n?.()}},[s,n]),s&&!l)?(0,v.jsx)(i.az,{"data-test-id":"search-box-container",id:O.rv}):(0,v.jsx)(r.Fragment,{children:e})}var t2=n(788446);function t3({isPartner:e=!1,widthType:t="md",inlineSYOP:n}){let a=(0,c.A)(),s=(0,o.zy)(),u=(0,l.A)(),{isRTL:h}=(0,_._8)(),{enabled:g}=(0,G.A)(),{enabled:x}=(0,tW.A)(),f=(0,$.A)({shouldSkipExpActivation:!0}),b=g||f,A=!!n,{group:w}=(0,L.A)()||{group:""},S=!!w&&!A,{pinId:j}=R(),k=(0,t2.A)(),{appUI:{showTypeaheadOverlay:I}}=(0,U.Y)(),{appliedQuery:E,displayedQuery:T,endPadding:C,enteredScope:B,handleClearSearch:M,handleScopeChange:N,handleSearchIconButtonClick:F,hasTypedSinceFocus:V,inputFocused:Y,isContentTypeFilterHovered:J,isInTypeaheadSession:Z,multimodalPinId:Q,searchBoxHovered:ee,setContentTypeFilterHovered:et,setSearchBoxHovered:en,showContentTypeFilter:ea,showIconOnly:er,suggestionGroups:eo,voiceSearchPlaceholder:ei}=(0,P.Z)(),es=!!E,el=(0,y.A)()(),ec=(0,r.useRef)(null),ed=!S&&!A&&ea;if(er&&!Y&&!es&&!Z)return(0,v.jsxs)(i.az,{ref:ec,"data-test-id":"search-box-container",id:O.rv,children:[(0,v.jsx)(i.K0,{accessibilityLabel:a.bt("Search icon", "Search icon", "searchBox.searchIcon.accessibilityLabel", undefined, true),icon:"magnifying-glass",iconColor:"subtle",onClick:F,size:"lg"}),el&&(0,v.jsx)(te,{})]});let eu=t&&Object.keys(O.XO).includes(t)&&"shrink"!==t?O.XO[t]:"auto",ep=(0,v.jsx)(i.az,{ref:ec,"data-test-id":"search-box-container",flex:"grow",id:O.rv,marginEnd:!x||S||A?0:2,minWidth:S?void 0:eu,paddingX:x?0:f?4:2,children:(0,v.jsxs)(i.az,{dangerouslySetInlineStyle:A&&{__style:{backgroundColor:"var(--sema-color-background-default)",border:ee?"1px solid var(--sema-color-hover-border-interactive)":"1px solid var(--sema-color-border-interactive)",outline:ee?"0.5px solid var(--sema-color-hover-border-interactive)":"0"}}||!S&&{__style:{backgroundColor:ee?z.uq:z.kP}}||void 0,display:"flex",height:S?void 0:48,rounding:A&&!Z&&400||(b?K.Xr:600),children:[(0,v.jsxs)(i.az,{alignItems:"center",dangerouslySetInlineStyle:S?void 0:{__style:{padding:h?`0 16px 0 ${C}`:`0 ${C} 0 16px`,...Z?{borderRadius:b?`${K.A4}px`:"24px",boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)"}:{}}},display:"flex",flex:"grow",height:"100%",onMouseEnter:()=>{en(!0)},onMouseLeave:()=>{en(!1)},position:"relative",children:[!(T||Y||Q)&&(0,v.jsx)(i.az,{dangerouslySetInlineStyle:S?{__style:{position:"absolute",top:"19px",left:"20px"}}:void 0,flex:"none",marginEnd:2,zIndex:S?H.rc:void 0,children:(0,v.jsx)(i.In,{accessibilityLabel:a.bt("Search icon", "Search icon", "searchBox.searchIcon.accessibilityLabel", undefined, true),color:S?"default":void 0,icon:"magnifying-glass",size:S?24:16})}),(0,v.jsx)(D,{inlineSYOP:A,name:"searchBoxInput"}),(0,v.jsx)(e0,{displayedQuery:T,hasAppliedQuery:es,hasTypedSinceFocus:V,inlineSYOP:A,isInTypeaheadSession:Z,isPartner:e,onClearSearch:M,searchBoxRef:ec,showContentTypeFilter:ed,voiceSearchPlaceholder:ei}),!!j&&(0,v.jsx)(X,{}),(0,v.jsx)(m,{children:(0,v.jsx)(p,{children:(0,v.jsx)(tJ,{inlineSYOP:A,searchBoxHeight:52,suggestionGroups:eo,width:"shrink"===t?"80vw":void 0})})}),el&&(0,v.jsx)(te,{})]}),ed?(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{background:"#d8d8d8",borderRadius:"1px"}},height:32,margin:"auto",width:2}),(0,v.jsx)(W,{currentlySelectedFilter:B,currentQuery:E,handleContentTypeFilterHover:()=>{e&&et(J)},handleScopeChange:N})]}):null]})});if(S){let e=Z&&628||w.includes("large")&&636||380,t=u.isAuth?u.username:"",n=s.pathname.includes(`/${t}/${tZ.H}`);return!((0,d.vo)(s)||n||I&&!Z)&&(0,v.jsx)(tQ,{children:(0,v.jsx)(t1,{children:(0,v.jsx)(q,{hideOnScroll:w.includes("hide")||w.includes("employees"),isInTypeaheadSession:Z,searchBoxHovered:ee,children:t=>{let n=t.isHidden&&!Z;return(0,v.jsx)(i.az,{column:10,dangerouslySetInlineStyle:{__style:{bottom:48,left:h?void 0:`calc(50% + ${k/2}px)`,right:h?`calc(50% + ${k/2}px)`:void 0,transform:"translateX(-50%)",backgroundColor:Z?"var(--sema-color-background-default)":void 0,boxShadow:"0 3px 12px 0 rgba(0, 0, 0, 0.25), 0 3px 36px var(--sema-elevation-background-blur-weak, 8px) rgba(209, 209, 209, 0.50)",transition:"opacity 200ms linear, width 150ms linear",opacity:n?.5:1}},maxWidth:e,position:"fixed",rounding:500,zIndex:new i.K5([H.rc]),children:ep})}})})})}return A&&Z?(0,v.jsx)(i.az,{flex:"grow",height:48,minWidth:eu,children:(0,v.jsx)(i.Wd,{zIndex:new i.K5([H.rc]),children:(0,v.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{left:h?void 0:`calc(50% + ${k/2}px)`,right:h?`calc(50% + ${k/2}px)`:void 0,top:{otherProfile:368,selfProfile:78,syopResultsPage:14}[n??"selfProfile"],transform:"translateX(-50%)"}},position:"fixed",rounding:500,width:`calc(85% - ${k}px)`,children:ep})})}):ep}function t6({handleIconOnlyChange:e,iconOnly:t=!1,isPartner:n=!1,widthType:o="md",inlineSYOP:i}){return(0,r.useEffect)(()=>{(0,a.A)("SearchBox","/app/www/discover/SearchBox/SearchBox.tsx")},[]),(0,v.jsx)(tX.n,{children:(0,v.jsx)(s.Q,{children:(0,v.jsx)(e7,{children:(0,v.jsx)(P.U,{handleIconOnlyChange:e,iconOnly:t,inlineSYOP:!!i,isPartner:n,widthType:o,children:(0,v.jsx)(t3,{handleIconOnlyChange:e,iconOnly:t,inlineSYOP:i,isPartner:n,widthType:o})})})})})}},323250(e,t,n){n.d(t,{A:()=>h,m:()=>p});var a=n(61163),r=n(859471),o=n(19821),i=n(538329),s=n(542975),l=n(496952),c=n(998377),d=n(562615);let u=Math.floor(3.5);function p({id:e,children:t,isHovered:n,url:i,onClick:s,onMouseEnter:l,onMouseLeave:c,onFocus:u,onBlur:p,rounding:h}){return(0,r.useEffect)(()=>{(0,a.A)("SuggestionReps","/app/www/discover/SearchBox/SuggestionReps.tsx")},[]),(0,d.jsx)(o.az,{"aria-selected":n?"true":"false","data-test-id":"search-suggestion",id:e,role:"option",children:(0,d.jsx)(o.pp,{active:n,children:(0,d.jsx)(o.$A,{href:i,onBlur:p,onFocus:u,onMouseDown:({event:e})=>e.preventDefault(),onMouseEnter:l,onMouseLeave:c,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),e.metaKey||e.ctrlKey||(e.preventDefault(),s())},rounding:h,children:t})})})}function h({highlightMatch:e=!1,iconName:t,imageUrl:n,isVerifiedMerchant:p=!1,label:h,onLoad:m,query:g,rounding:_,searchDelightConfig:y,subLabel:x,type:f,verified:b=!1}){(0,r.useEffect)(()=>{(0,a.A)("SuggestionReps","/app/www/discover/SearchBox/SuggestionReps.tsx")},[]);let v=(0,i.A)(),A="recent_pin_searches"===f?"rs-search-suggestion":n||t?"enriched-search-suggestion":"regular-search-suggestion";return(0,d.jsx)(o.az,{"data-test-id":A,display:"flex",paddingY:+!!n,width:"100%",children:(0,d.jsxs)(o.so,{alignItems:"center",gap:{row:2,column:0},children:[n?(0,d.jsx)(o.az,{"data-test-id":"enriched-autocomplete-image",height:40,marginStart:u,overflow:"hidden",rounding:_&&2===_?200:"circle",width:40,children:(0,d.jsx)(o._V,{alt:"",color:"#efefef",fit:"cover",naturalHeight:40,naturalWidth:40,onLoad:m,role:"presentation",src:n})}):(0,d.jsx)(o.so,{alignItems:"center",height:40,justifyContent:"center",width:40,children:(0,d.jsx)(o.In,{accessibilityLabel:t?(0,s.vQ)(v.bt("{{ icon}} icon", "{{ icon}} icon", "SearchBox.SearchSuggestion.EnrichedAutocomplete.Icon", undefined, true),{icon:t}).join():"",color:"default",icon:t||"magnifying-glass",size:12})}),(0,d.jsxs)(o.so,{alignItems:"start",direction:"column",gap:{row:0,column:1},justifyContent:"center",children:[(0,d.jsxs)(o.so,{alignItems:"center",children:[e&&g?(0,d.jsx)(l.A,{query:g,searchDelightConfig:y,text:h||g}):(0,d.jsx)(o.KJ,{weight:"bold",children:h}),(b||p)&&(0,d.jsx)(o.az,{marginStart:1,children:(0,d.jsx)(c.A,{iconOnly:!0,isVerifiedIdentity:b,isVerifiedMerchant:p,size:"xs",surface:"SuggestionReps"})})]}),x&&(0,d.jsx)(o.KJ,{size:"100",children:x})]})]})})}},621556(e,t,n){n.d(t,{H:()=>h,c:()=>p});var a=n(859471),r=n(693154),o=n(353614),i=n(538329),s=n(542975),l=n(430705),c=n(124674),d=n(224723),u=n(713364);function p({query:e,scope:t,autocompleteRequestSurface:n}){let l=(0,i.A)(),d=(0,r.A)(),u=(0,c.A)({allowSearchOnMount:!0,resourceName:"AdvancedTypeaheadResource",resourceOptions:{pin_scope:t,autocomplete_request_surface:n},value:e});return(0,a.useMemo)(()=>{let e=u?.map(e=>{if("query"===e.type){let{modified_filter_eligibility:t,query:n}=e,a=t?(0,s.vQ)(t?.hair_pattern?.eligible_filters?l.bt("{{ query }} by hair pattern", "{{ query }} by hair pattern", "SearchSuggestion.HairPatternFilterSuggestion", undefined, true):l.bt("{{ query }} by skin-tone range", "{{ query }} by skin tone range", "SearchSuggestion.SkinToneFilterSuggestion", undefined, true),{query:n}).join(""):n;return{...e,label:a}}return e});if(d.isAuth)return[{items:e||[],type:"blended_autocomplete"}];let t=(0,o.A)(e||[],e=>e.type);return[{items:["query","user"].flatMap(e=>t[e]).filter(e=>!!e),type:"blended_autocomplete"}]},[u,d,l])}function h(e){let{autocompleteRequestSurface:t}=e||{},{group:n}=(0,u.A)({isSyop:0!==t}),{isLoaded:o,data:i}=function(e){let t=(0,r.A)(),{autocompleteRequestSurface:n}=e||{};return(0,l.A)(t.isAuth?{name:"AdvancedTypeaheadResource",options:{term:"",pin_scope:d.cO.PINS,autocomplete_request_surface:n},noCache:!0}:null)}(e);return(0,a.useMemo)(()=>{if(o&&i)return{items:i.items.slice(0,n?.includes("recent_search")?12:5).map((e,t)=>({...e,resultIndex:t})),isLoaded:o};return{items:[],isLoaded:o}},[o,i,n])}},116432(e,t,n){n.d(t,{H:()=>a});let a="_profile"},142381(e,t,n){n.d(t,{AJ:()=>s,Dp:()=>o,GZ:()=>_,N6:()=>x,P0:()=>h,Sr:()=>u,TB:()=>d,WA:()=>r,WC:()=>c,bL:()=>m,gU:()=>y,ik:()=>p,kE:()=>f,mP:()=>l,wj:()=>i,yi:()=>g});var a=n(802209);let r=1048576,o=3,i=20,s=3,l=10,c=50,d=10,u=1200,p=375,h=375/a.$G,m=4096,g="#FFFFFF",_={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},y=420,x=325,f=768},672908(e,t,n){n.d(t,{A:()=>a});let a={base_grid_item:["aggregatedpindata.pin_tags","buyableproductmetadata.display_active_max_price","buyableproductmetadata.display_active_min_price","buyableproductmetadata.short_description","buyableproductmetadata.title","pin.access","pin.ad_data","pin.ad_destination_url","pin.ad_match_reason","pin.aggregated_pin_data()","pin.alt_text","pin.attribution","pin.carousel_data()","pin.collection_pin()","pin.created_at","pin.debug_info_html","pin.description","pin.domain","pin.dominant_color","pin.embed","pin.grid_title","pin.has_required_attribution_provider","pin.id","pin.image_crop","pin.image_signature","pin.images[170x,236x,474x,736x,orig]","pin.is_downstream_promotion","pin.is_eligible_for_web_closeup","pin.is_prefetch_enabled","pin.is_promoted","pin.is_uploaded","pin.link","pin.link_utm_applicable_and_replaced","pin.promoted_is_removable","pin.promoter()","pin.reaction_counts","pin.rich_summary()","pin.shopping_flags","pin.product_metadata()","product_metadata.shopping_flags","pin.should_open_in_stream","pin.sponsorship","pin.story_pin_data()","pin.story_pin_data_id","pin.title","pin.tracking_params","pin.type","pin.utm_link","pin.videos()","pincarouselslot.details","pincarouselslot.id","pincarouselslot.images[60x60,136x136,170x,236x,474x,564x,736x,600x315,orig]","pincarouselslot.link","pincarouselslot.title","pincarouselslot.videos()","user.ads_only_profile_site","user.full_name","user.image_medium_url","user.image_small_url","user.is_ads_only_profile","user.username","video.id","video.video_list[V_HLSV4,V_HLSV3_WEB,V_HLSV3_MOBILE,V_EXP3,V_EXP4,V_EXP5,V_EXP6,V_EXP7]"]}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/36273.en_IN-5be997c59d50d026.mjs.map